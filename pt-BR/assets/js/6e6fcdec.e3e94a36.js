"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[36429],{19702:(e,o,n)=>{n.d(o,{Ay:()=>a,RM:()=>i});var s=n(86070),r=n(15658);const i=[];function t(e){const o={a:"a",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(o.p,{children:["Recomendamos ler ",(0,s.jsx)(o.a,{href:"/authorization/role-based-access-control",children:"\ud83d\udd10 Controle de Acesso Baseado em Papel (RBAC)"})," primeiro para entender os conceitos b\xe1sicos do RBAC do Logto e como configurar corretamente os recursos de API."]})}function a(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},60705:(e,o,n)=>{n.d(o,{Ay:()=>a,RM:()=>i});var s=n(86070),r=n(15658);const i=[{value:"Ponto de verifica\xe7\xe3o: Teste seu aplicativo",id:"ponto-de-verifica\xe7\xe3o-teste-seu-aplicativo",level:3}];function t(e){const o={h3:"h3",li:"li",ol:"ol",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.h3,{id:"ponto-de-verifica\xe7\xe3o-teste-seu-aplicativo",children:"Ponto de verifica\xe7\xe3o: Teste seu aplicativo"}),"\n",(0,s.jsx)(o.p,{children:"Agora, voc\xea pode testar seu aplicativo:"}),"\n",(0,s.jsxs)(o.ol,{children:["\n",(0,s.jsx)(o.li,{children:"Execute seu aplicativo, voc\xea ver\xe1 o bot\xe3o de login."}),"\n",(0,s.jsx)(o.li,{children:"Clique no bot\xe3o de login, o SDK iniciar\xe1 o processo de login e redirecionar\xe1 voc\xea para a p\xe1gina de login do Logto."}),"\n",(0,s.jsx)(o.li,{children:"Ap\xf3s fazer login, voc\xea ser\xe1 redirecionado de volta para o seu aplicativo e ver\xe1 o bot\xe3o de logout."}),"\n",(0,s.jsx)(o.li,{children:"Clique no bot\xe3o de logout para limpar o armazenamento local e sair."}),"\n"]})]})}function a(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},22946:(e,o,n)=>{n.d(o,{Ay:()=>a,RM:()=>i});var s=n(86070),r=n(15658);const i=[];function t(e){const o={a:"a",admonition:"admonition",code:"code",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.p,{children:"Depois de configurar os recursos de API, voc\xea pode adicion\xe1-los ao configurar o Logto em seu aplicativo:"}),"\n",e.configResourcesCode,"\n",(0,s.jsx)(o.p,{children:"Cada recurso de API tem suas pr\xf3prias permiss\xf5es (escopos)."}),"\n",(0,s.jsxs)(o.p,{children:["Por exemplo, o recurso ",(0,s.jsx)(o.code,{children:"https://shopping.your-app.com/api"})," tem as permiss\xf5es ",(0,s.jsx)(o.code,{children:"shopping:read"})," e ",(0,s.jsx)(o.code,{children:"shopping:write"}),", e o recurso ",(0,s.jsx)(o.code,{children:"https://store.your-app.com/api"})," tem as permiss\xf5es ",(0,s.jsx)(o.code,{children:"store:read"})," e ",(0,s.jsx)(o.code,{children:"store:write"}),"."]}),"\n",(0,s.jsx)(o.p,{children:"Para solicitar essas permiss\xf5es, voc\xea pode adicion\xe1-las ao configurar o Logto em seu aplicativo:"}),"\n",e.configResourcesWithScopesCode,"\n",(0,s.jsxs)(o.p,{children:["Voc\xea pode notar que os escopos s\xe3o definidos separadamente dos recursos de API. Isso ocorre porque ",(0,s.jsx)(o.a,{href:"https://www.rfc-editor.org/rfc/rfc8707.html",children:"Resource Indicators for OAuth 2.0"})," especifica que os escopos finais para a solicita\xe7\xe3o ser\xe3o o produto cartesiano de todos os escopos em todos os servi\xe7os de destino."]}),"\n",e.configResourcesWithSharedScopesCode&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["Assim, no caso acima, os escopos podem ser simplificados a partir da defini\xe7\xe3o no Logto, ambos os recursos de API podem ter escopos ",(0,s.jsx)("code",{children:"read"})," e ",(0,s.jsx)("code",{children:"write"})," sem o prefixo. Ent\xe3o, na configura\xe7\xe3o do Logto:"]}),e.configResourcesWithSharedScopesCode,(0,s.jsxs)("p",{children:["Para cada recurso de API, ele solicitar\xe1 os escopos ",(0,s.jsx)("code",{children:"read"})," e ",(0,s.jsx)("code",{children:"write"}),"."]})]}),"\n",(0,s.jsx)(o.admonition,{type:"note",children:(0,s.jsxs)(o.p,{children:["N\xe3o h\xe1 problema em solicitar escopos que n\xe3o est\xe3o definidos nos recursos de API. Por exemplo, voc\xea pode solicitar o escopo ",(0,s.jsx)(o.code,{children:"email"})," mesmo que os recursos de API n\xe3o tenham o escopo ",(0,s.jsx)(o.code,{children:"email"})," dispon\xedvel. Escopos indispon\xedveis ser\xe3o ignorados com seguran\xe7a."]})}),"\n",(0,s.jsx)(o.p,{children:"Ap\xf3s o login bem-sucedido, o Logto emitir\xe1 os escopos apropriados para os recursos de API de acordo com os pap\xe9is do usu\xe1rio."})]})}function a(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},48136:(e,o,n)=>{n.d(o,{Ay:()=>a,RM:()=>i});var s=n(86070),r=n(15658);const i=[];function t(e){const o={p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(o.p,{children:["Voc\xea pode perceber que algumas informa\xe7\xf5es do usu\xe1rio est\xe3o faltando no objeto retornado de ",(0,s.jsx)("code",{children:e.method}),". Isso ocorre porque OAuth 2.0 e OpenID Connect (OIDC) s\xe3o projetados para seguir o princ\xedpio do menor privil\xe9gio (PoLP), e o Logto \xe9 constru\xeddo com base nesses padr\xf5es."]})}function a(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},68445:(e,o,n)=>{n.d(o,{Ay:()=>a,RM:()=>i});var s=n(86070),r=n(15658);const i=[];function t(e){const{Url:o}={...(0,r.R)(),...e.components};return o||function(e,o){throw new Error("Expected "+(o?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Url",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o,{href:"/end-user-flows",children:" Fluxos do usu\xe1rio final: fluxos de autentica\xe7\xe3o, fluxos de conta e fluxos de organiza\xe7\xe3o "}),"\n",(0,s.jsx)(o,{href:"/connectors",children:" Configurar conectores "}),"\n",(0,s.jsx)(o,{href:"/authorization/api-resources/protect-your-api",children:" Proteger sua API "})]})}function a(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},75395:(e,o,n)=>{n.d(o,{Ay:()=>a,RM:()=>i});var s=n(86070),r=n(15658);const i=[];function t(e){const o={a:"a",li:"li",ol:"ol",p:"p",...(0,r.R)(),...e.components},{Details:n}=o;return n||function(e,o){throw new Error("Expected "+(o?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(n,{children:[(0,s.jsx)("summary",{children:"Sobre o login baseado em redirecionamento"}),(0,s.jsxs)(o.ol,{children:["\n",(0,s.jsxs)(o.li,{children:["Este processo de autentica\xe7\xe3o segue o protocolo ",(0,s.jsx)(o.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html",children:"OpenID Connect (OIDC)"}),", e o Logto aplica medidas de seguran\xe7a rigorosas para proteger o login do usu\xe1rio."]}),"\n",(0,s.jsx)(o.li,{children:"Se voc\xea tiver v\xe1rios aplicativos, pode usar o mesmo provedor de identidade (Logto). Uma vez que o usu\xe1rio faz login em um aplicativo, o Logto completar\xe1 automaticamente o processo de login quando o usu\xe1rio acessar outro aplicativo."}),"\n"]}),(0,s.jsxs)(o.p,{children:["Para saber mais sobre a l\xf3gica e os benef\xedcios do login baseado em redirecionamento, veja ",(0,s.jsx)(o.a,{href:"/concepts/sign-in-experience",children:"Experi\xeancia de login do Logto explicada"}),"."]})]})}function a(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},18445:(e,o,n)=>{n.d(o,{Ay:()=>a,RM:()=>i});var s=n(86070),r=n(15658);const i=[];function t(e){const o={a:"a",admonition:"admonition",code:"code",hr:"hr",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.p,{children:"Aqui est\xe1 a lista de Escopos (Scopes) suportados e as Reivindica\xe7\xf5es (Claims) correspondentes:"}),"\n",(0,s.jsx)(o.p,{children:(0,s.jsx)(o.strong,{children:(0,s.jsx)(o.code,{children:"openid"})})}),"\n",(0,s.jsxs)(o.table,{children:[(0,s.jsx)(o.thead,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.th,{children:"Nome da Reivindica\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Tipo"}),(0,s.jsx)(o.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsx)(o.tbody,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"sub"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"string"})}),(0,s.jsx)(o.td,{children:"O identificador \xfanico do usu\xe1rio"}),(0,s.jsx)(o.td,{children:"N\xe3o"})]})})]}),"\n",(0,s.jsx)(o.p,{children:(0,s.jsx)(o.strong,{children:(0,s.jsx)(o.code,{children:"profile"})})}),"\n",(0,s.jsxs)(o.table,{children:[(0,s.jsx)(o.thead,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.th,{children:"Nome da Reivindica\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Tipo"}),(0,s.jsx)(o.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsxs)(o.tbody,{children:[(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"name"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"string"})}),(0,s.jsx)(o.td,{children:"O nome completo do usu\xe1rio"}),(0,s.jsx)(o.td,{children:"N\xe3o"})]}),(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"username"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"string"})}),(0,s.jsx)(o.td,{children:"O nome de usu\xe1rio do usu\xe1rio"}),(0,s.jsx)(o.td,{children:"N\xe3o"})]}),(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"picture"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"string"})}),(0,s.jsx)(o.td,{children:"URL da foto de perfil do Usu\xe1rio Final. Este URL DEVE referir-se a um arquivo de imagem (por exemplo, um arquivo de imagem PNG, JPEG ou GIF), em vez de uma p\xe1gina da Web contendo uma imagem. Note que este URL DEVE referenciar especificamente uma foto de perfil do Usu\xe1rio Final adequada para exibi\xe7\xe3o ao descrever o Usu\xe1rio Final, em vez de uma foto arbitr\xe1ria tirada pelo Usu\xe1rio Final."}),(0,s.jsx)(o.td,{children:"N\xe3o"})]}),(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"created_at"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"number"})}),(0,s.jsx)(o.td,{children:"Hora em que o Usu\xe1rio Final foi criado. O tempo \xe9 representado como o n\xfamero de milissegundos desde a \xe9poca Unix (1970-01-01T00:00:00Z)."}),(0,s.jsx)(o.td,{children:"N\xe3o"})]}),(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"updated_at"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"number"})}),(0,s.jsx)(o.td,{children:"Hora em que as informa\xe7\xf5es do Usu\xe1rio Final foram atualizadas pela \xfaltima vez. O tempo \xe9 representado como o n\xfamero de milissegundos desde a \xe9poca Unix (1970-01-01T00:00:00Z)."}),(0,s.jsx)(o.td,{children:"N\xe3o"})]})]})]}),"\n",(0,s.jsxs)(o.p,{children:["Outras ",(0,s.jsx)(o.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#StandardClaims",children:"reivindica\xe7\xf5es padr\xe3o"})," incluem ",(0,s.jsx)(o.code,{children:"family_name"}),", ",(0,s.jsx)(o.code,{children:"given_name"}),", ",(0,s.jsx)(o.code,{children:"middle_name"}),", ",(0,s.jsx)(o.code,{children:"nickname"}),", ",(0,s.jsx)(o.code,{children:"preferred_username"}),", ",(0,s.jsx)(o.code,{children:"profile"}),", ",(0,s.jsx)(o.code,{children:"website"}),", ",(0,s.jsx)(o.code,{children:"gender"}),", ",(0,s.jsx)(o.code,{children:"birthdate"}),", ",(0,s.jsx)(o.code,{children:"zoneinfo"})," e ",(0,s.jsx)(o.code,{children:"locale"})," tamb\xe9m ser\xe3o inclu\xeddas no escopo ",(0,s.jsx)(o.code,{children:"profile"})," sem a necessidade de solicitar o endpoint userinfo. Uma diferen\xe7a em rela\xe7\xe3o \xe0s reivindica\xe7\xf5es acima \xe9 que essas reivindica\xe7\xf5es s\xf3 ser\xe3o retornadas quando seus valores n\xe3o estiverem vazios, enquanto as reivindica\xe7\xf5es acima retornar\xe3o ",(0,s.jsx)(o.code,{children:"null"})," se os valores estiverem vazios."]}),"\n",(0,s.jsx)(o.admonition,{type:"note",children:(0,s.jsxs)(o.p,{children:["Ao contr\xe1rio das reivindica\xe7\xf5es padr\xe3o, as reivindica\xe7\xf5es ",(0,s.jsx)(o.code,{children:"created_at"})," e ",(0,s.jsx)(o.code,{children:"updated_at"})," est\xe3o usando milissegundos em vez de segundos."]})}),"\n",(0,s.jsx)(o.p,{children:(0,s.jsx)(o.strong,{children:(0,s.jsx)(o.code,{children:"email"})})}),"\n",(0,s.jsxs)(o.table,{children:[(0,s.jsx)(o.thead,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.th,{children:"Nome da Reivindica\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Tipo"}),(0,s.jsx)(o.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsxs)(o.tbody,{children:[(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"email"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"string"})}),(0,s.jsx)(o.td,{children:"O endere\xe7o de email do usu\xe1rio"}),(0,s.jsx)(o.td,{children:"N\xe3o"})]}),(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"email_verified"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"boolean"})}),(0,s.jsx)(o.td,{children:"Se o endere\xe7o de email foi verificado"}),(0,s.jsx)(o.td,{children:"N\xe3o"})]})]})]}),"\n",(0,s.jsx)(o.p,{children:(0,s.jsx)(o.strong,{children:(0,s.jsx)(o.code,{children:"phone"})})}),"\n",(0,s.jsxs)(o.table,{children:[(0,s.jsx)(o.thead,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.th,{children:"Nome da Reivindica\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Tipo"}),(0,s.jsx)(o.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsxs)(o.tbody,{children:[(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"phone_number"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"string"})}),(0,s.jsx)(o.td,{children:"O n\xfamero de telefone do usu\xe1rio"}),(0,s.jsx)(o.td,{children:"N\xe3o"})]}),(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"phone_number_verified"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"boolean"})}),(0,s.jsx)(o.td,{children:"Se o n\xfamero de telefone foi verificado"}),(0,s.jsx)(o.td,{children:"N\xe3o"})]})]})]}),"\n",(0,s.jsx)(o.p,{children:(0,s.jsx)(o.strong,{children:(0,s.jsx)(o.code,{children:"address"})})}),"\n",(0,s.jsxs)(o.p,{children:["Por favor, consulte o ",(0,s.jsx)(o.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#AddressClaim",children:"OpenID Connect Core 1.0"})," para os detalhes da reivindica\xe7\xe3o de endere\xe7o."]}),"\n",(0,s.jsx)(o.p,{children:(0,s.jsx)(o.strong,{children:(0,s.jsx)(o.code,{children:"custom_data"})})}),"\n",(0,s.jsxs)(o.table,{children:[(0,s.jsx)(o.thead,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.th,{children:"Nome da Reivindica\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Tipo"}),(0,s.jsx)(o.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsx)(o.tbody,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"custom_data"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"object"})}),(0,s.jsx)(o.td,{children:"Os dados personalizados do usu\xe1rio"}),(0,s.jsx)(o.td,{children:"Sim"})]})})]}),"\n",(0,s.jsx)(o.p,{children:(0,s.jsx)(o.strong,{children:(0,s.jsx)(o.code,{children:"identities"})})}),"\n",(0,s.jsxs)(o.table,{children:[(0,s.jsx)(o.thead,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.th,{children:"Nome da Reivindica\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Tipo"}),(0,s.jsx)(o.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsxs)(o.tbody,{children:[(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"identities"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"object"})}),(0,s.jsx)(o.td,{children:"As identidades vinculadas do usu\xe1rio"}),(0,s.jsx)(o.td,{children:"Sim"})]}),(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"sso_identities"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"array"})}),(0,s.jsx)(o.td,{children:"As identidades SSO vinculadas do usu\xe1rio"}),(0,s.jsx)(o.td,{children:"Sim"})]})]})]}),"\n",(0,s.jsx)(o.p,{children:(0,s.jsx)(o.strong,{children:(0,s.jsx)(o.code,{children:"urn:logto:scope:organizations"})})}),"\n",(0,s.jsxs)(o.table,{children:[(0,s.jsx)(o.thead,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.th,{children:"Nome da Reivindica\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Tipo"}),(0,s.jsx)(o.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsxs)(o.tbody,{children:[(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"organizations"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"string[]"})}),(0,s.jsx)(o.td,{children:"Os IDs das organiza\xe7\xf5es \xe0s quais o usu\xe1rio pertence"}),(0,s.jsx)(o.td,{children:"N\xe3o"})]}),(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"organization_data"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"object[]"})}),(0,s.jsx)(o.td,{children:"Os dados das organiza\xe7\xf5es \xe0s quais o usu\xe1rio pertence"}),(0,s.jsx)(o.td,{children:"Sim"})]})]})]}),"\n",(0,s.jsx)(o.p,{children:(0,s.jsx)(o.strong,{children:(0,s.jsx)(o.code,{children:"urn:logto:scope:organization_roles"})})}),"\n",(0,s.jsxs)(o.table,{children:[(0,s.jsx)(o.thead,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.th,{children:"Nome da Reivindica\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Tipo"}),(0,s.jsx)(o.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsx)(o.tbody,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"organization_roles"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"string[]"})}),(0,s.jsxs)(o.td,{children:["Os pap\xe9is da organiza\xe7\xe3o aos quais o usu\xe1rio pertence com o formato ",(0,s.jsx)(o.code,{children:"<organization_id>:<role_name>"})]}),(0,s.jsx)(o.td,{children:"N\xe3o"})]})})]}),"\n",(0,s.jsx)(o.hr,{}),"\n",(0,s.jsxs)(o.p,{children:['Considerando o desempenho e o tamanho dos dados, se "Precisa de userinfo?" for "Sim", isso significa que a reivindica\xe7\xe3o n\xe3o aparecer\xe1 no Token de ID, mas ser\xe1 retornada na resposta do ',(0,s.jsx)(o.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"endpoint userinfo"}),"."]})]})}function a(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},5800:(e,o,n)=>{n.d(o,{Ay:()=>c,RM:()=>t});var s=n(86070),r=n(15658),i=n(18445);const t=[...i.RM];function a(e){const o={a:"a",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.p,{children:["Logto usa as ",(0,s.jsx)(o.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#Claims",children:"conven\xe7\xf5es de escopos e reivindica\xe7\xf5es"})," do OIDC para definir os escopos e reivindica\xe7\xf5es para recuperar informa\xe7\xf5es do usu\xe1rio do Token de ID e do ",(0,s.jsx)("a",{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"endpoint userinfo"}),' do OIDC. Tanto "escopo" quanto "reivindica\xe7\xe3o" s\xe3o termos das especifica\xe7\xf5es OAuth 2.0 e OpenID Connect (OIDC).']}),"\n","\n",e.configScopesCode&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{children:"Em resumo, quando voc\xea solicita um escopo, voc\xea obter\xe1 as reivindica\xe7\xf5es correspondentes nas informa\xe7\xf5es do usu\xe1rio. Por exemplo, se voc\xea solicitar o escopo `email`, voc\xea obter\xe1 os dados `email` e `email_verified` do usu\xe1rio."}),(0,s.jsx)("p",{children:"Por padr\xe3o, o Logto SDK sempre solicitar\xe1 tr\xeas escopos: `openid`, `profile` e `offline_access`, e n\xe3o h\xe1 como remover esses escopos padr\xe3o. Mas voc\xea pode adicionar mais escopos ao configurar o Logto:"}),e.configScopesCode]}),"\n",(0,s.jsx)(i.Ay,{})]})}function c(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},1625:(e,o,n)=>{n.d(o,{Ay:()=>a,RM:()=>i});var s=n(86070),r=n(15658);const i=[];function t(e){const o={admonition:"admonition",code:"code",mermaid:"mermaid",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.p,{children:"Por padr\xe3o, reivindica\xe7\xf5es limitadas s\xe3o retornadas. Se voc\xea precisar de mais informa\xe7\xf5es, pode solicitar escopos adicionais para acessar mais reivindica\xe7\xf5es."}),"\n",(0,s.jsx)(o.admonition,{type:"info",children:(0,s.jsx)(o.p,{children:'Uma "reivindica\xe7\xe3o (Claim)" \xe9 uma afirma\xe7\xe3o feita sobre um sujeito; um "escopo (Scope)" \xe9 um grupo de reivindica\xe7\xf5es. No caso atual, uma reivindica\xe7\xe3o \xe9 uma informa\xe7\xe3o sobre o usu\xe1rio.'})}),"\n",(0,s.jsx)(o.p,{children:"Aqui est\xe1 um exemplo n\xe3o normativo da rela\xe7\xe3o escopo - reivindica\xe7\xe3o:"}),"\n",(0,s.jsx)(o.mermaid,{value:"classDiagram\n  class openid {\n    +sub\n  }\n\n  class profile {\n    +name\n    +username\n    +picture\n    +...\n  }\n\n  class email {\n    +email\n    +email_verified\n  }\n\n  class phone {\n    +phone_number\n    +phone_number_verified\n  }"}),"\n",(0,s.jsx)(o.admonition,{type:"tip",children:(0,s.jsx)(o.p,{children:'A reivindica\xe7\xe3o "sub" significa "sujeito (Subject)", que \xe9 o identificador \xfanico do usu\xe1rio (ou seja, ID do usu\xe1rio).'})}),"\n",(0,s.jsxs)(o.p,{children:["O Logto SDK sempre solicitar\xe1 tr\xeas escopos: ",(0,s.jsx)(o.code,{children:"openid"}),", ",(0,s.jsx)(o.code,{children:"profile"})," e ",(0,s.jsx)(o.code,{children:"offline_access"}),"."]})]})}function a(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},84939:(e,o,n)=>{n.d(o,{Ay:()=>c,Ip:()=>i,RM:()=>t});var s=n(86070),r=n(15658);const i="http://localhost:3000/",t=[];function a(e){const o={admonition:"admonition",p:"p",...(0,r.R)(),...e.components};return(0,s.jsx)(o.admonition,{type:"note",children:(0,s.jsxs)(o.p,{children:["Nos trechos de c\xf3digo a seguir, assumimos que seu aplicativo est\xe1 sendo executado em ",(0,s.jsx)("code",{children:i}),"."]})})}function c(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},76727:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>I,contentTitle:()=>k,default:()=>N,frontMatter:()=>P,metadata:()=>s,toc:()=>y});const s=JSON.parse('{"id":"quick-starts/framework/dotnet-blazor-server/README","title":"Adicionar autentica\xe7\xe3o ao seu aplicativo .NET Core (Blazor Server)","description":"Pr\xe9-requisitos","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/quick-starts/framework/dotnet-blazor-server/README.mdx","sourceDirName":"quick-starts/framework/dotnet-blazor-server","slug":"/quick-starts/dotnet-core/blazor-server","permalink":"/pt-BR/quick-starts/dotnet-core/blazor-server","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/pt-BR/docusaurus-plugin-content-docs/current/quick-starts/framework/dotnet-blazor-server/README.mdx","tags":[],"version":"current","frontMatter":{"slug":"/quick-starts/dotnet-core/blazor-server","sidebar_label":".NET Core (Blazor Server)","sidebar_custom_props":{"logoFilename":"dotnet-blazor.svg","description":"Integrar Logto ao seu aplicativo .NET Core Blazor Server."}},"sidebar":"quickStartSidebar","previous":{"title":"Extens\xe3o Chrome","permalink":"/pt-BR/quick-starts/chrome-extension"},"next":{"title":".NET Core (Blazor WASM)","permalink":"/pt-BR/quick-starts/dotnet-core/blazor-wasm"}}');var r=n(86070),i=n(15658),t=n(19702),a=n(60705),c=n(68445),d=n(13346),l=n(96685),p=n(19185),u=n(49505),h=n(94494),x=n(7436),m=n(19570),j=n(75648);function g(e){const o={code:"code",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.p,{children:"Como o Blazor Server usa SignalR para se comunicar entre o servidor e o cliente, isso significa que m\xe9todos que manipulam diretamente o contexto HTTP (como emitir desafios ou redirecionamentos) n\xe3o funcionam como esperado quando chamados de um componente Blazor."}),"\n",(0,r.jsx)(o.p,{children:"Para corrigir isso, precisamos adicionar explicitamente dois endpoints para redirecionamentos de login e logout:"}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-csharp",metastring:'title="Program.cs"',children:'app.MapGet("/SignIn", async context =>\n{\n    if (!(context.User?.Identity?.IsAuthenticated ?? false))\n    {\n        await context.ChallengeAsync(new AuthenticationProperties { RedirectUri = "/" });\n    } else {\n        context.Response.Redirect("/");\n    }\n});\n\napp.MapGet("/SignOut", async context =>\n{\n    if (context.User?.Identity?.IsAuthenticated ?? false)\n    {\n        await context.SignOutAsync(new AuthenticationProperties { RedirectUri = "/" });\n    } else {\n        context.Response.Redirect("/");\n    }\n});\n'})}),"\n",(0,r.jsx)(o.p,{children:"Agora podemos redirecionar para esses endpoints para acionar login e logout."})]})}function v(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,r.jsx)(o,{...e,children:(0,r.jsx)(g,{...e})}):g(e)}function f(e){const o={code:"code",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.p,{children:["Alternativamente, voc\xea pode usar o componente ",(0,r.jsx)(o.code,{children:"AuthorizeView"})," para renderizar condicionalmente o conte\xfado com base no estado de autentica\xe7\xe3o do usu\xe1rio. Este componente \xe9 \xfatil quando voc\xea deseja mostrar conte\xfado diferente para usu\xe1rios autenticados e n\xe3o autenticados."]}),"\n",(0,r.jsx)(o.p,{children:"No seu componente Razor, adicione o seguinte c\xf3digo:"}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-cshtml",metastring:'title="Components/Pages/Index.razor"',children:"@using Microsoft.AspNetCore.Components.Authorization\n\n@* ... *@\n\n<AuthorizeView>\n    <Authorized>\n        <p>Nome: @User?.Identity?.Name</p>\n        @* Conte\xfado para usu\xe1rios autenticados *@\n    </Authorized>\n    <NotAuthorized>\n        @* Conte\xfado para usu\xe1rios n\xe3o autenticados *@\n    </NotAuthorized>\n</AuthorizeView>\n\n@* ... *@\n"})}),"\n",(0,r.jsxs)(o.p,{children:["O componente ",(0,r.jsx)(o.code,{children:"AuthorizeView"})," requer um par\xe2metro em cascata do tipo ",(0,r.jsx)(o.code,{children:"Task<AuthenticationState>"}),". Uma maneira direta de obter este par\xe2metro \xe9 adicionar o componente ",(0,r.jsx)(o.code,{children:"<CascadingAuthenticationState>"}),". No entanto, devido \xe0 natureza do Blazor Server, n\xe3o podemos simplesmente adicionar o componente ao layout ou ao componente raiz (pode n\xe3o funcionar como esperado). Em vez disso, podemos adicionar o seguinte c\xf3digo ao builder (",(0,r.jsx)(o.code,{children:"Program.cs"})," ou ",(0,r.jsx)(o.code,{children:"Startup.cs"}),") para fornecer o par\xe2metro em cascata:"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-csharp",metastring:'title="Program.cs"',children:"builder.Services.AddCascadingAuthenticationState();\n"})}),"\n",(0,r.jsxs)(o.p,{children:["Ent\xe3o, voc\xea pode usar o componente ",(0,r.jsx)(o.code,{children:"AuthorizeView"})," em todos os componentes que precisarem dele."]})]})}function A(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,r.jsx)(o,{...e,children:(0,r.jsx)(f,{...e})}):f(e)}function b(e){const o={code:"code",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.p,{children:["Como n\xe3o podemos acessar diretamente o ",(0,r.jsx)(o.code,{children:"HttpContext"})," em componentes Razor, precisamos injetar o ",(0,r.jsx)(o.code,{children:"HttpContextAccessor"})," no componente e us\xe1-lo para buscar os tokens. O c\xf3digo a seguir demonstra como buscar o token de acesso para o recurso de API em um componente Razor:"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-cshtml",metastring:'title="Components/Pages/Index.razor"',children:'@using Microsoft.AspNetCore.Components.Authorization\n@using System.Security.Claims\n@using Logto.AspNetCore.Authentication\n@using Microsoft.AspNetCore.Authentication\n@inject AuthenticationStateProvider AuthenticationStateProvider\n@inject IHttpContextAccessor HttpContextAccessor\n\n@* ... *@\n\n<p><b>Recurso:</b> @(Resource ?? "(null)")</p>\n<p><b>Token de Acesso:</b> @(AccessToken ?? "(null)")</p>\n\n@* ... *@\n\n@code {\n    private ClaimsPrincipal? User { get; set; }\n    private string? AccessToken { get; set; }\n    private string? Resource { get; set; }\n\n    protected override async Task OnInitializedAsync()\n    {\n        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();\n        User = authState.User;\n\n        if (User?.Identity?.IsAuthenticated == true)\n        {\n            await FetchTokenAsync();\n        }\n    }\n\n    private async Task FetchTokenAsync()\n    {\n        var httpContext = HttpContextAccessor.HttpContext;\n        if (httpContext == null)\n        {\n            return;\n        }\n\n        var logtoOptions = httpContext.GetLogtoOptions();\n        Resource = logtoOptions?.Resource;\n        // Substitua por outros tipos de token, se necess\xe1rio\n        AccessToken = await httpContext.GetTokenAsync(LogtoParameters.Tokens.AccessTokenForResource);\n    }\n}\n'})})]})}function R(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,r.jsx)(o,{...e,children:(0,r.jsx)(b,{...e})}):b(e)}function C(e){const o={code:"code",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.p,{children:"No componente Razor, adicione o seguinte c\xf3digo:"}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-cshtml",metastring:'title="Components/Pages/Index.razor"',children:'@using Microsoft.AspNetCore.Components.Authorization\n@using System.Security.Claims\n@inject AuthenticationStateProvider AuthenticationStateProvider\n@inject NavigationManager NavigationManager\n\n@* ... *@\n\n<p>Est\xe1 autenticado: @User.Identity?.IsAuthenticated</p>\n@if (User.Identity?.IsAuthenticated == true)\n{\n    <button @onclick="SignOut">Sair</button>\n}\nelse\n{\n    <button @onclick="SignIn">Entrar</button>\n}\n\n@* ... *@\n\n@code {\n    private ClaimsPrincipal? User { get; set; }\n\n    protected override async Task OnInitializedAsync()\n    {\n        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();\n        User = authState.User;\n    }\n\n    private void SignIn()\n    {\n        NavigationManager.NavigateTo("/SignIn", forceLoad: true);\n    }\n\n    private void SignOut()\n    {\n        NavigationManager.NavigateTo("/SignOut", forceLoad: true);\n    }\n}\n'})}),"\n",(0,r.jsxs)(o.p,{children:[(0,r.jsx)(o.strong,{children:"Explica\xe7\xe3o"}),":"]}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsxs)(o.li,{children:["O ",(0,r.jsx)(o.code,{children:"AuthenticationStateProvider"})," injetado \xe9 usado para obter o estado de autentica\xe7\xe3o do usu\xe1rio atual e preencher a propriedade ",(0,r.jsx)(o.code,{children:"User"}),"."]}),"\n",(0,r.jsxs)(o.li,{children:["Os m\xe9todos ",(0,r.jsx)(o.code,{children:"SignIn"})," e ",(0,r.jsx)(o.code,{children:"SignOut"})," s\xe3o usados para redirecionar o usu\xe1rio para os endpoints de login e logout, respectivamente. Devido \xe0 natureza do Blazor Server, precisamos usar o ",(0,r.jsx)(o.code,{children:"NavigationManager"})," com carregamento for\xe7ado para acionar o redirecionamento."]}),"\n"]}),"\n",(0,r.jsx)(o.p,{children:'A p\xe1gina mostrar\xe1 o bot\xe3o "Entrar" se o usu\xe1rio n\xe3o estiver autenticado e mostrar\xe1 o bot\xe3o "Sair" se o usu\xe1rio estiver autenticado.'})]})}function S(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,r.jsx)(o,{...e,children:(0,r.jsx)(C,{...e})}):C(e)}const P={slug:"/quick-starts/dotnet-core/blazor-server",sidebar_label:".NET Core (Blazor Server)",sidebar_custom_props:{logoFilename:"dotnet-blazor.svg",description:"Integrar Logto ao seu aplicativo .NET Core Blazor Server."}},k="Adicionar autentica\xe7\xe3o ao seu aplicativo .NET Core (Blazor Server)",I={},y=[...h.RM,{value:"Pr\xe9-requisitos",id:"pr\xe9-requisitos",level:2},{value:"Instala\xe7\xe3o",id:"instala\xe7\xe3o",level:2},...x.RM,{value:"Integra\xe7\xe3o",id:"integra\xe7\xe3o",level:2},{value:"Adicionar autentica\xe7\xe3o Logto",id:"adicionar-autentica\xe7\xe3o-logto",level:3},...d.RM,{value:"Fluxos de login e logout",id:"fluxos-de-login-e-logout",level:3},...m.RM,{value:"Configurar URIs de redirecionamento",id:"configurar-uris-de-redirecionamento",level:3},...l.RM,{value:"Adicionar rotas",id:"adicionar-rotas",level:3},{value:"Implementar bot\xf5es de login e logout",id:"implementar-bot\xf5es-de-login-e-logout",level:3},{value:"O componente <code>&lt;AuthorizeView /&gt;</code>",id:"o-componente-authorizeview-",level:3},...a.RM,{value:"Obter informa\xe7\xf5es do usu\xe1rio",id:"obter-informa\xe7\xf5es-do-usu\xe1rio",level:2},...u.RM,{value:"Recursos de API",id:"recursos-de-api",level:2},...t.RM,{value:"Configurar recurso de API no seu aplicativo",id:"configurar-recurso-de-api-no-seu-aplicativo",level:3},...j.RM,{value:"Buscar tokens",id:"buscar-tokens",level:2},{value:"Buscar token via <code>HttpContext</code>",id:"buscar-token-via-httpcontext",level:3},...p.RM,{value:"Buscar token em componentes Razor",id:"buscar-token-em-componentes-razor",level:3},{value:"Leituras adicionais",id:"leituras-adicionais",level:2},...c.RM];function z(e){const o={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.header,{children:(0,r.jsx)(o.h1,{id:"adicionar-autentica\xe7\xe3o-ao-seu-aplicativo-net-core-blazor-server",children:"Adicionar autentica\xe7\xe3o ao seu aplicativo .NET Core (Blazor Server)"})}),"\n",(0,r.jsx)(h.Ay,{}),"\n",(0,r.jsx)(o.h2,{id:"pr\xe9-requisitos",children:"Pr\xe9-requisitos"}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsxs)(o.li,{children:["Uma conta ",(0,r.jsx)(o.a,{href:"https://cloud.logto.io",children:"Logto Cloud"})," ou um ",(0,r.jsx)(o.a,{href:"/introduction/set-up-logto-oss",children:"Logto auto-hospedado"}),"."]}),"\n",(0,r.jsx)(o.li,{children:"Um aplicativo web tradicional Logto criado."}),"\n"]}),"\n",(0,r.jsx)(o.h2,{id:"instala\xe7\xe3o",children:"Instala\xe7\xe3o"}),"\n",(0,r.jsx)(x.Ay,{}),"\n",(0,r.jsx)(o.h2,{id:"integra\xe7\xe3o",children:"Integra\xe7\xe3o"}),"\n",(0,r.jsx)(o.h3,{id:"adicionar-autentica\xe7\xe3o-logto",children:"Adicionar autentica\xe7\xe3o Logto"}),"\n",(0,r.jsx)(d.Ay,{}),"\n",(0,r.jsx)(o.h3,{id:"fluxos-de-login-e-logout",children:"Fluxos de login e logout"}),"\n",(0,r.jsx)(m.Ay,{}),"\n",(0,r.jsx)(o.h3,{id:"configurar-uris-de-redirecionamento",children:"Configurar URIs de redirecionamento"}),"\n",(0,r.jsx)(l.Ay,{}),"\n",(0,r.jsx)(o.h3,{id:"adicionar-rotas",children:"Adicionar rotas"}),"\n",(0,r.jsx)(v,{}),"\n",(0,r.jsx)(o.h3,{id:"implementar-bot\xf5es-de-login-e-logout",children:"Implementar bot\xf5es de login e logout"}),"\n",(0,r.jsx)(S,{}),"\n",(0,r.jsxs)(o.h3,{id:"o-componente-authorizeview-",children:["O componente ",(0,r.jsx)(o.code,{children:"<AuthorizeView />"})]}),"\n",(0,r.jsx)(A,{}),"\n",(0,r.jsx)(a.Ay,{}),"\n",(0,r.jsx)(o.h2,{id:"obter-informa\xe7\xf5es-do-usu\xe1rio",children:"Obter informa\xe7\xf5es do usu\xe1rio"}),"\n",(0,r.jsx)(u.Ay,{}),"\n",(0,r.jsx)(o.h2,{id:"recursos-de-api",children:"Recursos de API"}),"\n",(0,r.jsx)(t.Ay,{}),"\n",(0,r.jsx)(o.h3,{id:"configurar-recurso-de-api-no-seu-aplicativo",children:"Configurar recurso de API no seu aplicativo"}),"\n",(0,r.jsx)(j.Ay,{}),"\n",(0,r.jsx)(o.h2,{id:"buscar-tokens",children:"Buscar tokens"}),"\n",(0,r.jsxs)(o.h3,{id:"buscar-token-via-httpcontext",children:["Buscar token via ",(0,r.jsx)(o.code,{children:"HttpContext"})]}),"\n",(0,r.jsx)(p.Ay,{}),"\n",(0,r.jsx)(o.h3,{id:"buscar-token-em-componentes-razor",children:"Buscar token em componentes Razor"}),"\n",(0,r.jsx)(R,{}),"\n",(0,r.jsx)(o.h2,{id:"leituras-adicionais",children:"Leituras adicionais"}),"\n",(0,r.jsx)(c.Ay,{})]})}function N(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,r.jsx)(o,{...e,children:(0,r.jsx)(z,{...e})}):z(e)}},13346:(e,o,n)=>{n.d(o,{Ay:()=>a,RM:()=>i});var s=n(86070),r=n(15658);const i=[];function t(e){const o={code:"code",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.p,{children:["Abra ",(0,s.jsx)(o.code,{children:"Startup.cs"})," (ou ",(0,s.jsx)(o.code,{children:"Program.cs"}),") e adicione o seguinte c\xf3digo para registrar os servi\xe7os de autentica\xe7\xe3o do Logto:"]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-csharp",metastring:'title="Program.cs"',children:'using Logto.AspNetCore.Authentication;\n\nvar builder = WebApplication.CreateBuilder(args);\n\nbuilder.Services.AddLogtoAuthentication(options =>\n{\n  options.Endpoint = builder.Configuration["Logto:Endpoint"]!;\n  options.AppId = builder.Configuration["Logto:AppId"]!;\n  options.AppSecret = builder.Configuration["Logto:AppSecret"];\n});\n'})}),"\n",(0,s.jsxs)(o.p,{children:["O m\xe9todo ",(0,s.jsx)(o.code,{children:"AddLogtoAuthentication"})," far\xe1 as seguintes coisas:"]}),"\n",(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsxs)(o.li,{children:["Definir o esquema de autentica\xe7\xe3o padr\xe3o para ",(0,s.jsx)(o.code,{children:"LogtoDefaults.CookieScheme"}),"."]}),"\n",(0,s.jsxs)(o.li,{children:["Definir o esquema de desafio padr\xe3o para ",(0,s.jsx)(o.code,{children:"LogtoDefaults.AuthenticationScheme"}),"."]}),"\n",(0,s.jsxs)(o.li,{children:["Definir o esquema de logout padr\xe3o para ",(0,s.jsx)(o.code,{children:"LogtoDefaults.AuthenticationScheme"}),"."]}),"\n",(0,s.jsx)(o.li,{children:"Adicionar manipuladores de autentica\xe7\xe3o de cookie e OpenID Connect ao esquema de autentica\xe7\xe3o."}),"\n"]})]})}function a(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},96685:(e,o,n)=>{n.d(o,{Ay:()=>d,RM:()=>a});var s=n(86070),r=n(15658),i=n(8899),t=n(84939);const a=[...t.RM,{value:"Alterar os caminhos padr\xe3o",id:"alterar-os-caminhos-padr\xe3o",level:4}];function c(e){const o={code:"code",h4:"h4",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.Ay,{}),"\n",(0,s.jsxs)(o.p,{children:["Primeiro, vamos configurar o ",(0,s.jsx)(o.strong,{children:"URI de redirecionamento do Logto"}),'. Adicione o seguinte URI \xe0 lista de "Redirect URIs" na p\xe1gina de detalhes do aplicativo Logto:']}),"\n",(0,s.jsx)(i.A,{children:`http://${t.Ip}/Callback`}),"\n",(0,s.jsxs)(o.p,{children:["Para configurar o ",(0,s.jsx)(o.strong,{children:"URI de redirecionamento p\xf3s logout do Logto"}),', adicione o seguinte URI \xe0 lista de "Post sign-out redirect URIs" na p\xe1gina de detalhes do aplicativo Logto:']}),"\n",(0,s.jsx)(i.A,{children:`http://${t.Ip}/SignedOutCallback`}),"\n",(0,s.jsx)(o.h4,{id:"alterar-os-caminhos-padr\xe3o",children:"Alterar os caminhos padr\xe3o"}),"\n",(0,s.jsxs)(o.p,{children:["O ",(0,s.jsx)(o.strong,{children:"URI de redirecionamento do Logto"})," tem um caminho padr\xe3o de ",(0,s.jsx)(o.code,{children:"/Callback"}),", e o ",(0,s.jsx)(o.strong,{children:"URI de redirecionamento p\xf3s logout do Logto"})," tem um caminho padr\xe3o de ",(0,s.jsx)(o.code,{children:"/SignedOutCallback"}),"."]}),"\n",(0,s.jsxs)(o.p,{children:["Voc\xea pode deix\xe1-los como est\xe3o se n\xe3o houver nenhum requisito especial. Se voc\xea quiser alter\xe1-los, pode definir a propriedade ",(0,s.jsx)(o.code,{children:"CallbackPath"})," e ",(0,s.jsx)(o.code,{children:"SignedOutCallbackPath"})," para ",(0,s.jsx)(o.code,{children:"LogtoOptions"}),":"]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-csharp",metastring:'title="Program.cs"',children:'builder.Services.AddLogtoAuthentication(options =>\n{\n  // Outras configura\xe7\xf5es...\n  // highlight-start\n  options.CallbackPath = "/Foo";\n  options.SignedOutCallbackPath = "/Bar";\n  // highlight-end\n});\n'})}),"\n",(0,s.jsx)(o.p,{children:"Lembre-se de atualizar o valor na p\xe1gina de detalhes do aplicativo Logto de acordo."})]})}function d(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},19185:(e,o,n)=>{n.d(o,{Ay:()=>a,RM:()=>i});var s=n(86070),r=n(15658);const i=[];function t(e){const o={admonition:"admonition",code:"code",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.p,{children:["\xc0s vezes, voc\xea pode precisar buscar o token de acesso ou o token de ID para chamadas de API. Voc\xea pode usar o m\xe9todo ",(0,s.jsx)(o.code,{children:"GetTokenAsync"})," para buscar os tokens:"]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-csharp",children:"var accessToken = await HttpContext.GetTokenAsync(LogtoParameters.Tokens.AccessToken);\nvar idToken = await HttpContext.GetTokenAsync(LogtoParameters.Tokens.IdToken);\n"})}),"\n",(0,s.jsx)(o.p,{children:"N\xe3o h\xe1 necessidade de se preocupar com a expira\xe7\xe3o do token, o middleware de autentica\xe7\xe3o ir\xe1 automaticamente atualizar os tokens quando necess\xe1rio."}),"\n",(0,s.jsx)(o.admonition,{type:"caution",children:(0,s.jsx)(o.p,{children:"Embora o middleware de autentica\xe7\xe3o atualize automaticamente os tokens, as reivindica\xe7\xf5es (Claims) no objeto do usu\xe1rio n\xe3o ser\xe3o atualizadas devido \xe0 limita\xe7\xe3o do manipulador de autentica\xe7\xe3o OpenID Connect subjacente.\nIsso pode ser resolvido assim que escrevermos nosso pr\xf3prio manipulador de autentica\xe7\xe3o."})}),"\n",(0,s.jsxs)(o.p,{children:["Observe que o token de acesso acima \xe9 um token opaco (Opaque token) para o endpoint userinfo no OpenID Connect, que n\xe3o \xe9 um token JWT. Se voc\xea especificou o recurso de API, precisa usar ",(0,s.jsx)(o.code,{children:"LogtoParameters.Tokens.AccessTokenForResource"})," para buscar o token de acesso para o recurso de API:"]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-csharp",children:"var accessToken = await HttpContext.GetTokenAsync(LogtoParameters.Tokens.AccessTokenForResource);\n"})}),"\n",(0,s.jsx)(o.p,{children:"Este token ser\xe1 um token JWT com o recurso de API como o p\xfablico (Audience)."})]})}function a(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},49505:(e,o,n)=>{n.d(o,{Ay:()=>l,RM:()=>c});var s=n(86070),r=n(15658),i=n(48136),t=n(5800),a=n(1625);const c=[{value:"Exibir informa\xe7\xf5es do usu\xe1rio",id:"exibir-informa\xe7\xf5es-do-usu\xe1rio",level:3},{value:"Solicitar reivindica\xe7\xf5es adicionais",id:"solicitar-reivindica\xe7\xf5es-adicionais",level:3},...i.RM,...a.RM,{value:"Reivindica\xe7\xf5es que precisam de solicita\xe7\xe3o de rede",id:"reivindica\xe7\xf5es-que-precisam-de-solicita\xe7\xe3o-de-rede",level:3},{value:"Escopos e reivindica\xe7\xf5es",id:"escopos-e-reivindica\xe7\xf5es",level:3},...t.RM];function d(e){const o={a:"a",code:"code",h3:"h3",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.h3,{id:"exibir-informa\xe7\xf5es-do-usu\xe1rio",children:"Exibir informa\xe7\xf5es do usu\xe1rio"}),"\n",(0,s.jsxs)(o.p,{children:["Para saber se o usu\xe1rio est\xe1 autenticado, voc\xea pode verificar a propriedade ",(0,s.jsx)(o.code,{children:"User.Identity?.IsAuthenticated"}),"."]}),"\n",(0,s.jsxs)(o.p,{children:["Para obter as reivindica\xe7\xf5es do perfil do usu\xe1rio, voc\xea pode usar a propriedade ",(0,s.jsx)(o.code,{children:"User.Claims"}),":"]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-csharp",metastring:'title="Controllers/HomeController.cs"',children:"var claims = User.Claims;\n\n// Obter o ID do usu\xe1rio\nvar userId = claims.FirstOrDefault(c => c.Type == LogtoParameters.Claims.Subject)?.Value;\n"})}),"\n",(0,s.jsxs)(o.p,{children:["Veja ",(0,s.jsx)(o.a,{href:"https://github.com/logto-io/csharp/blob/master/src/Logto.AspNetCore.Authentication/LogtoParameters.cs",children:(0,s.jsx)(o.code,{children:"LogtoParameters.Claims"})})," para a lista de nomes de reivindica\xe7\xf5es e seus significados."]}),"\n",(0,s.jsx)(o.h3,{id:"solicitar-reivindica\xe7\xf5es-adicionais",children:"Solicitar reivindica\xe7\xf5es adicionais"}),"\n",(0,s.jsx)(i.Ay,{method:"User.Claims"}),"\n",(0,s.jsx)(a.Ay,{}),"\n",(0,s.jsxs)(o.p,{children:["Para solicitar escopos adicionais, voc\xea pode configurar a propriedade ",(0,s.jsx)(o.code,{children:"Scopes"})," no objeto ",(0,s.jsx)(o.code,{children:"options"}),":"]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-csharp",metastring:'title="Program.cs"',children:"builder.Services.AddLogtoAuthentication(options =>\n{\n  // ...\n  // highlight-start\n  options.Scopes = new string[] {\n    LogtoParameters.Scopes.Email,\n    LogtoParameters.Scopes.Phone\n  }\n  // highlight-end\n});\n"})}),"\n",(0,s.jsxs)(o.p,{children:["Ent\xe3o voc\xea pode acessar as reivindica\xe7\xf5es adicionais via ",(0,s.jsx)(o.code,{children:"User.Claims"}),":"]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-csharp",metastring:'title="Controllers/HomeController.cs"',children:"var claims = User.Claims;\n\n// Obter o email do usu\xe1rio\nvar email = claims.FirstOrDefault(c => c.Type == LogtoParameters.Claims.Email)?.Value;\n"})}),"\n",(0,s.jsx)(o.h3,{id:"reivindica\xe7\xf5es-que-precisam-de-solicita\xe7\xe3o-de-rede",children:"Reivindica\xe7\xf5es que precisam de solicita\xe7\xe3o de rede"}),"\n",(0,s.jsxs)(o.p,{children:["Para evitar sobrecarregar o objeto do usu\xe1rio, algumas reivindica\xe7\xf5es requerem solicita\xe7\xf5es de rede para serem buscadas. Por exemplo, a reivindica\xe7\xe3o custom_data n\xe3o est\xe1 inclu\xedda no objeto do usu\xe1rio, mesmo que seja solicitada nos escopos. Para buscar essas reivindica\xe7\xf5es, voc\xea pode definir ",(0,s.jsx)(o.code,{children:"GetClaimsFromUserInfoEndpoint"})," como ",(0,s.jsx)(o.code,{children:"true"})," no objeto ",(0,s.jsx)(o.code,{children:"options"}),":"]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-csharp",metastring:'title="Program.cs"',children:"builder.Services.AddLogtoAuthentication(options =>\n{\n  // ...\n  // highlight-next-line\n  options.GetClaimsFromUserInfoEndpoint = true;\n});\n"})}),"\n",(0,s.jsx)(o.h3,{id:"escopos-e-reivindica\xe7\xf5es",children:"Escopos e reivindica\xe7\xf5es"}),"\n",(0,s.jsx)(t.Ay,{})]})}function l(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},94494:(e,o,n)=>{n.d(o,{Ay:()=>a,RM:()=>i});var s=n(86070),r=n(15658);const i=[];function t(e){const o={a:"a",admonition:"admonition",li:"li",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsx)(o.admonition,{type:"tip",children:(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsx)(o.li,{children:"A demonstra\xe7\xe3o a seguir \xe9 constru\xedda no .NET Core 8.0. O SDK \xe9 compat\xedvel com .NET 6.0 ou superior."}),"\n",(0,s.jsxs)(o.li,{children:["Os projetos de exemplo do .NET Core est\xe3o dispon\xedveis no ",(0,s.jsx)(o.a,{href:"https://github.com/logto-io/csharp",children:"reposit\xf3rio GitHub"}),"."]}),"\n"]})})}function a(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},7436:(e,o,n)=>{n.d(o,{Ay:()=>a,RM:()=>i});var s=n(86070),r=n(15658);const i=[];function t(e){const o={code:"code",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.p,{children:"Adicione o pacote NuGet ao seu projeto:"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-bash",children:"dotnet add package Logto.AspNetCore.Authentication\n"})})]})}function a(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},19570:(e,o,n)=>{n.d(o,{Ay:()=>c,RM:()=>t});var s=n(86070),r=n(15658),i=n(75395);const t=[...i.RM];function a(e){const o={li:"li",mermaid:"mermaid",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.p,{children:"Antes de prosseguirmos, h\xe1 dois termos confusos no middleware de autentica\xe7\xe3o do .NET Core que precisamos esclarecer:"}),"\n",(0,s.jsxs)(o.ol,{children:["\n",(0,s.jsxs)(o.li,{children:[(0,s.jsx)(o.strong,{children:"CallbackPath"}),': O URI para o qual o Logto redirecionar\xe1 o usu\xe1rio ap\xf3s o usu\xe1rio ter feito login (o "URI de redirecionamento" no Logto)']}),"\n",(0,s.jsxs)(o.li,{children:[(0,s.jsx)(o.strong,{children:"RedirectUri"}),": O URI para o qual ser\xe1 redirecionado ap\xf3s as a\xe7\xf5es necess\xe1rias terem sido realizadas no middleware de autentica\xe7\xe3o do Logto."]}),"\n"]}),"\n",(0,s.jsx)(o.p,{children:"O processo de login pode ser ilustrado da seguinte forma:"}),"\n",(0,s.jsx)(o.mermaid,{value:"graph LR\n  subgraph Seu aplicativo\n    A\n    C\n    D\n  end\n  subgraph Logto\n    B\n  end\n  A(Caminho de login) --\x3e|Redirecionar para| B(Logto)\n  B --\x3e|Redirecionar para| C(CallbackPath)\n  C --\x3e|Redirecionar para| D(RedirectUri)"}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsxs)(o.p,{children:["Da mesma forma, o .NET Core tamb\xe9m possui ",(0,s.jsx)(o.strong,{children:"SignedOutCallbackPath"})," e ",(0,s.jsx)(o.strong,{children:"RedirectUri"})," para o fluxo de logout."]}),"\n",(0,s.jsx)(o.p,{children:"Para maior clareza, nos referiremos a eles da seguinte forma:"}),"\n",(0,s.jsxs)(o.table,{children:[(0,s.jsx)(o.thead,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.th,{children:"Termo que usamos"}),(0,s.jsx)(o.th,{children:"Termo do .NET Core"})]})}),(0,s.jsxs)(o.tbody,{children:[(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"URI de redirecionamento do Logto"}),(0,s.jsx)(o.td,{children:"CallbackPath"})]}),(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"URI de redirecionamento p\xf3s-logout do Logto"}),(0,s.jsx)(o.td,{children:"SignedOutCallbackPath"})]}),(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"URI de redirecionamento do aplicativo"}),(0,s.jsx)(o.td,{children:"RedirectUri"})]})]})]}),"\n",(0,s.jsx)(i.Ay,{})]})}function c(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},75648:(e,o,n)=>{n.d(o,{Ay:()=>u,RM:()=>l});var s=n(86070),r=n(15658),i=n(22946);function t(e){const o={code:"code",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-csharp",metastring:'title="Program.cs"',children:'builder.Services.AddLogtoAuthentication(options =>\n{\n  // ...\n  // highlight-next-line\n  options.Resource = "https://<seu-indicador-de-recurso-de-api>";\n});\n'})})}function a(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}function c(e){const o={code:"code",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-csharp",metastring:'title="Program.cs"',children:'builder.Services.AddLogtoAuthentication(options =>\n{\n  // ...\n  // highlight-start\n  options.Resource = "https://shopping.your-app.com/api";\n  options.Scopes = new string[] {\n    "openid",\n    "profile",\n    "offline_access",\n    "read",\n    "write"\n  };\n  // highlight-end\n});\n'})})}function d(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}const l=[...i.RM];function p(e){return(0,s.jsx)(i.Ay,{configResourcesCode:(0,s.jsx)(a,{}),configResourcesWithScopesCode:(0,s.jsx)(d,{})})}function u(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(p,{...e})}):p()}}}]);