"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[12357],{46256:(e,o,a)=>{a.r(o),a.d(o,{assets:()=>t,contentTitle:()=>d,default:()=>c,frontMatter:()=>n,metadata:()=>s,toc:()=>p});const s=JSON.parse('{"id":"authorization/organization-template/configure-organization-template","title":"Configurar modelo de organiza\xe7\xe3o","description":"Vamos passar pelo processo de configura\xe7\xe3o do recurso de modelo de organiza\xe7\xe3o via Logto Console.","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/authorization/organization-template/configure-organization-template.mdx","sourceDirName":"authorization/organization-template","slug":"/authorization/organization-template/configure-organization-template","permalink":"/pt-BR/authorization/organization-template/configure-organization-template","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/pt-BR/docusaurus-plugin-content-docs/current/authorization/organization-template/configure-organization-template.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Modelo de organiza\xe7\xe3o","permalink":"/pt-BR/authorization/organization-template/"},"next":{"title":"Proteger recursos da organiza\xe7\xe3o","permalink":"/pt-BR/authorization/organization-template/protect-organization-resources"}}');var i=a(86070),r=a(15658);const n={sidebar_position:1},d="Configurar modelo de organiza\xe7\xe3o",t={},p=[{value:"Configurar via Logto Console",id:"configurar-via-logto-console",level:2},{value:"Criar permiss\xe3o da organiza\xe7\xe3o",id:"criar-permiss\xe3o-da-organiza\xe7\xe3o",level:3},{value:"Criar papel da organiza\xe7\xe3o",id:"criar-papel-da-organiza\xe7\xe3o",level:3},{value:"Pap\xe9is de organiza\xe7\xe3o apenas com permiss\xf5es da organiza\xe7\xe3o",id:"pap\xe9is-de-organiza\xe7\xe3o-apenas-com-permiss\xf5es-da-organiza\xe7\xe3o",level:4},{value:"Pap\xe9is de organiza\xe7\xe3o apenas com permiss\xf5es de API",id:"pap\xe9is-de-organiza\xe7\xe3o-apenas-com-permiss\xf5es-de-api",level:4},{value:"Pap\xe9is de organiza\xe7\xe3o com permiss\xf5es mistas de API e organiza\xe7\xe3o",id:"pap\xe9is-de-organiza\xe7\xe3o-com-permiss\xf5es-mistas-de-api-e-organiza\xe7\xe3o",level:4},{value:"Configurar via Logto Management API",id:"configurar-via-logto-management-api",level:2},{value:"Lidar com mudan\xe7a de permiss\xe3o de membro",id:"lidar-com-mudan\xe7a-de-permiss\xe3o-de-membro",level:2},{value:"Nenhuma nova permiss\xe3o introduzida no sistema",id:"nenhuma-nova-permiss\xe3o-introduzida-no-sistema",level:4},{value:"Nova permiss\xe3o \xe9 introduzida no sistema e atribu\xedda a um membro",id:"nova-permiss\xe3o-\xe9-introduzida-no-sistema-e-atribu\xedda-a-um-membro",level:4}];function m(e){const o={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{CloudLink:a}=o;return a||function(e,o){throw new Error("Expected "+(o?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("CloudLink",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.header,{children:(0,i.jsx)(o.h1,{id:"configurar-modelo-de-organiza\xe7\xe3o",children:"Configurar modelo de organiza\xe7\xe3o"})}),"\n",(0,i.jsx)(o.p,{children:"Vamos passar pelo processo de configura\xe7\xe3o do recurso de modelo de organiza\xe7\xe3o via Logto Console."}),"\n",(0,i.jsxs)(o.p,{children:["Primeiro, navegue at\xe9 ",(0,i.jsx)(a,{to:"/organization-template",children:"Console > Modelo de organiza\xe7\xe3o"}),". Voc\xea ver\xe1 que o modelo de organiza\xe7\xe3o inclui duas partes: Pap\xe9is da Organiza\xe7\xe3o e Permiss\xf5es da Organiza\xe7\xe3o. Um modelo de organiza\xe7\xe3o define pol\xedticas de controle de acesso compartilhadas (permiss\xf5es e pap\xe9is) para v\xe1rias organiza\xe7\xf5es."]}),"\n",(0,i.jsx)(o.h2,{id:"configurar-via-logto-console",children:"Configurar via Logto Console"}),"\n",(0,i.jsx)(o.h3,{id:"criar-permiss\xe3o-da-organiza\xe7\xe3o",children:"Criar permiss\xe3o da organiza\xe7\xe3o"}),"\n",(0,i.jsx)(o.p,{children:"As permiss\xf5es da organiza\xe7\xe3o s\xe3o uma parte fundamental do modelo de organiza\xe7\xe3o. Essas permiss\xf5es s\xe3o projetadas especificamente para organiza\xe7\xf5es dentro do seu produto. Veja como gerenci\xe1-las:"}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.strong,{children:"Encontre a aba de permiss\xf5es da organiza\xe7\xe3o:"}),' V\xe1 para a aba "Permiss\xf5es da organiza\xe7\xe3o" para ver suas permiss\xf5es existentes.']}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.strong,{children:"Adicionar, excluir e editar:"})," Voc\xea pode facilmente adicionar novas permiss\xf5es da organiza\xe7\xe3o, excluir as que n\xe3o precisa e editar permiss\xf5es existentes conforme necess\xe1rio."]}),"\n"]}),"\n",(0,i.jsx)(o.h3,{id:"criar-papel-da-organiza\xe7\xe3o",children:"Criar papel da organiza\xe7\xe3o"}),"\n",(0,i.jsx)(o.p,{children:"Logto suporta dois tipos de pap\xe9is de organiza\xe7\xe3o, isso \xe9 o mesmo que o RBAC em n\xedvel de usu\xe1rio / sistema:"}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.strong,{children:"Usu\xe1rio"}),": Pap\xe9is que s\xe3o atribu\xeddos a usu\xe1rios."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.strong,{children:"M\xe1quina para m\xe1quina"}),": Pap\xe9is que s\xe3o atribu\xeddos a aplicativos m\xe1quina para m\xe1quina."]}),"\n"]}),"\n",(0,i.jsx)(o.p,{children:"Logto permite que voc\xea defina pap\xe9is de organiza\xe7\xe3o de v\xe1rias maneiras para se adequar \xe0 estrutura do seu sistema:"}),"\n",(0,i.jsx)(o.h4,{id:"pap\xe9is-de-organiza\xe7\xe3o-apenas-com-permiss\xf5es-da-organiza\xe7\xe3o",children:"Pap\xe9is de organiza\xe7\xe3o apenas com permiss\xf5es da organiza\xe7\xe3o"}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.strong,{children:"Quando usar:"})," Voc\xea tem endpoints separados para usu\xe1rio / sistema e organiza\xe7\xe3o."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.strong,{children:"Explica\xe7\xe3o:"})," Esta \xe9 a abordagem mais simples se a arquitetura t\xe9cnica do seu produto e o design da API separarem claramente os recursos em n\xedvel de usu\xe1rio / sistema dos recursos da organiza\xe7\xe3o. Seus pap\xe9is de organiza\xe7\xe3o incluir\xe3o apenas as permiss\xf5es que voc\xea define para a organiza\xe7\xe3o."]}),"\n"]}),"\n",(0,i.jsx)(o.h4,{id:"pap\xe9is-de-organiza\xe7\xe3o-apenas-com-permiss\xf5es-de-api",children:"Pap\xe9is de organiza\xe7\xe3o apenas com permiss\xf5es de API"}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.strong,{children:"Quando usar:"})," O controle de acesso em n\xedvel de usu\xe1rio / sistema e em n\xedvel de organiza\xe7\xe3o \xe9 tratado pelos mesmos endpoints."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.strong,{children:"Explica\xe7\xe3o:"})," Escolha isso se voc\xea quiser gerenciar todas as permiss\xf5es atrav\xe9s de recursos de API unificados."]}),"\n"]}),"\n",(0,i.jsx)(o.h4,{id:"pap\xe9is-de-organiza\xe7\xe3o-com-permiss\xf5es-mistas-de-api-e-organiza\xe7\xe3o",children:"Pap\xe9is de organiza\xe7\xe3o com permiss\xf5es mistas de API e organiza\xe7\xe3o"}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.strong,{children:"Quando usar:"})," Voc\xea tem endpoints separados definidos para seu produto para n\xedvel de usu\xe1rio / sistema e n\xedvel de organiza\xe7\xe3o, mas alguns pap\xe9is de usu\xe1rio exigem uma mistura de permiss\xf5es em n\xedvel de usu\xe1rio e em n\xedvel de organiza\xe7\xe3o."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.strong,{children:"Explica\xe7\xe3o:"})," Isso oferece mais flexibilidade, mas tamb\xe9m pode ser mais complexo de gerenciar."]}),"\n"]}),"\n",(0,i.jsx)(o.h2,{id:"configurar-via-logto-management-api",children:"Configurar via Logto Management API"}),"\n",(0,i.jsx)(o.p,{children:"Tudo o que voc\xea pode fazer no Console tamb\xe9m pode ser feito atrav\xe9s do Management API, incluindo: Gerenciar modelo de organiza\xe7\xe3o para criar, excluir ou editar permiss\xf5es e pap\xe9is da organiza\xe7\xe3o."}),"\n",(0,i.jsx)(o.p,{children:"Para uma lista completa de capacidades, consulte nossa refer\xeancia de API:"}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.a,{href:"https://openapi.logto.io/operation/operation-updateorganizationrole",children:"Logto Management API - papel da organiza\xe7\xe3o"}),"."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.a,{href:"https://openapi.logto.io/operation/operation-listorganizationscopes",children:"Logto Management API - permiss\xe3o da organiza\xe7\xe3o"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(o.p,{children:["Com o Logto Management API, voc\xea pode criar experi\xeancias personalizadas de organiza\xe7\xe3o, como permitir que administradores de organiza\xe7\xf5es se autoatendam e criem organiza\xe7\xf5es. Confira ",(0,i.jsx)(o.a,{href:"/end-user-flows/organization-experience/",children:"esta se\xe7\xe3o"})," para habilitar mais recursos e gerenciamento em n\xedvel de organiza\xe7\xe3o."]}),"\n",(0,i.jsx)(o.h2,{id:"lidar-com-mudan\xe7a-de-permiss\xe3o-de-membro",children:"Lidar com mudan\xe7a de permiss\xe3o de membro"}),"\n",(0,i.jsx)(o.p,{children:"Semelhante ao RBAC de API, as permiss\xf5es de membros podem ser alteradas durante uma sess\xe3o -- por exemplo, eles podem receber novos pap\xe9is ou ter permiss\xf5es de pap\xe9is existentes modificadas."}),"\n",(0,i.jsx)(o.p,{children:"O que acontece quando uma permiss\xe3o de membro muda? Existem dois casos."}),"\n",(0,i.jsx)(o.h4,{id:"nenhuma-nova-permiss\xe3o-introduzida-no-sistema",children:"Nenhuma nova permiss\xe3o introduzida no sistema"}),"\n",(0,i.jsx)(o.p,{children:"Os tokens de acesso da organiza\xe7\xe3o atuais (tamb\xe9m conhecidos como token de organiza\xe7\xe3o) permanecer\xe3o v\xe1lidos at\xe9 que expirem, mesmo ap\xf3s as permiss\xf5es da organiza\xe7\xe3o de um usu\xe1rio serem alteradas. No entanto, novas permiss\xf5es ser\xe3o refletidas em tokens de organiza\xe7\xe3o subsequentes, e quaisquer permiss\xf5es revogadas ser\xe3o omitidas."}),"\n",(0,i.jsx)(o.admonition,{type:"note",children:(0,i.jsx)(o.p,{children:"Os tokens de organiza\xe7\xe3o t\xeam um tempo de expira\xe7\xe3o fixo que n\xe3o pode ser alterado, ao contr\xe1rio dos tokens de acesso gen\xe9ricos."})}),"\n",(0,i.jsxs)(o.p,{children:["Chame periodicamente os endpoints do ",(0,i.jsx)(o.a,{href:"/integrate-logto/interact-with-management-api/",children:"Logto Management API"})," ou estabele\xe7a uma conex\xe3o de longa dura\xe7\xe3o (por exemplo, usando WebSocket) para buscar dinamicamente as permiss\xf5es da organiza\xe7\xe3o do usu\xe1rio. Ao detectar mudan\xe7as, limpe o token de organiza\xe7\xe3o existente e os tokens rec\xe9m-emitidos refletir\xe3o automaticamente as mudan\xe7as no escopo de permiss\xe3o da organiza\xe7\xe3o."]}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-bash",children:'curl \\\n -X GET https://[tenant_id].logto.app/api/organizations/{id}/users/{userId}/scopes \\\n -H "Authorization: Bearer $ORGANIZATION_TOKEN"\n'})}),"\n",(0,i.jsxs)(o.p,{children:["Quando mudan\xe7as de permiss\xe3o forem detectadas, limpe o token de organiza\xe7\xe3o do armazenamento primeiro e, em seguida, chame o m\xe9todo SDK ",(0,i.jsx)(o.code,{children:"getOrganizationToken(organizationId)"})," para adquirir um novo. O token de organiza\xe7\xe3o rec\xe9m-emitido deve refletir as mudan\xe7as de permiss\xe3o."]}),"\n",(0,i.jsx)(o.h4,{id:"nova-permiss\xe3o-\xe9-introduzida-no-sistema-e-atribu\xedda-a-um-membro",children:"Nova permiss\xe3o \xe9 introduzida no sistema e atribu\xedda a um membro"}),"\n",(0,i.jsx)(o.p,{children:"Isso acontece quando novas permiss\xf5es s\xe3o introduzidas no seu modelo de organiza\xe7\xe3o. Nesse caso, voc\xea precisar\xe1 primeiro incluir os novos escopos de permiss\xe3o introduzidos ao inicializar o cliente Logto. Por exemplo:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-tsx",children:"new LogtoClient({\n  appId: 'your-app-id',\n  redirectUrl: 'your-redirect-url',\n  scopes: [\n    'urn:logto:scope:organizations',\n    // ... seus outros escopos de permiss\xe3o de organiza\xe7\xe3o existentes,\n    'new-organization-permission-scope',\n  ],\n});\n"})}),"\n",(0,i.jsx)(o.p,{children:"Em segundo lugar, cada um dos seus aplicativos cliente precisar\xe1 re-consentir ou re-login dos usu\xe1rios para receber a mudan\xe7a de permiss\xe3o. Ent\xe3o, o novo escopo de permiss\xe3o ser\xe1 refletido em novos tokens de organiza\xe7\xe3o."}),"\n",(0,i.jsx)(o.p,{children:"Exemplo de c\xf3digo para re-consentimento:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-tsx",children:"signIn({ redirectUrl: 'your-redirect-url', prompt: 'consent' });\n"})})]})}function c(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(m,{...e})}):m(e)}},15658:(e,o,a)=>{a.d(o,{R:()=>n,x:()=>d});var s=a(30758);const i={},r=s.createContext(i);function n(e){const o=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function d(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:n(e.components),s.createElement(r.Provider,{value:o},e.children)}}}]);