"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[4373],{4638:(e,s,o)=>{o.r(s),o.d(s,{assets:()=>d,contentTitle:()=>t,default:()=>p,frontMatter:()=>i,metadata:()=>a,toc:()=>u});const a=JSON.parse('{"id":"user-management/user-migration","title":"Migra\xe7\xe3o de usu\xe1rios","description":"Logto suporta a migra\xe7\xe3o manual de usu\xe1rios existentes de outra plataforma. Este guia mostrar\xe1 como importar usu\xe1rios existentes via Management API e falar\xe1 sobre coisas que voc\xea deve considerar antes de migrar.","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/user-management/user-migration.mdx","sourceDirName":"user-management","slug":"/user-management/user-migration","permalink":"/pt-BR/user-management/user-migration","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/pt-BR/docusaurus-plugin-content-docs/current/user-management/user-migration.mdx","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"docsSidebar","previous":{"title":"Token de acesso pessoal","permalink":"/pt-BR/user-management/personal-access-token"},"next":{"title":"Gerenciamento de usu\xe1rios","permalink":"/pt-BR/user-management/"}}');var r=o(86070),n=o(15658);const i={sidebar_position:5},t="Migra\xe7\xe3o de usu\xe1rios",d={},u=[{value:"Esquema de usu\xe1rio",id:"esquema-de-usu\xe1rio",level:2},{value:"Hashing de senha",id:"hashing-de-senha",level:2},{value:"Etapas para migrar",id:"etapas-para-migrar",level:2}];function c(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"migra\xe7\xe3o-de-usu\xe1rios",children:"Migra\xe7\xe3o de usu\xe1rios"})}),"\n",(0,r.jsx)(s.p,{children:"Logto suporta a migra\xe7\xe3o manual de usu\xe1rios existentes de outra plataforma. Este guia mostrar\xe1 como importar usu\xe1rios existentes via Management API e falar\xe1 sobre coisas que voc\xea deve considerar antes de migrar."}),"\n",(0,r.jsx)(s.h2,{id:"esquema-de-usu\xe1rio",children:"Esquema de usu\xe1rio"}),"\n",(0,r.jsxs)(s.p,{children:["Antes de come\xe7armos, vamos dar uma olhada no ",(0,r.jsx)(s.a,{href:"/user-management/user-data/#user-profile",children:"esquema de usu\xe1rio"})," no Logto. Existem 3 partes do esquema de usu\xe1rio que voc\xea deve estar ciente:"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Dados b\xe1sicos"}),": s\xe3o as informa\xe7\xf5es b\xe1sicas do perfil do usu\xe1rio, voc\xea pode corresponder os dados do seu perfil de usu\xe1rio existente."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Dados personalizados"}),": armazena informa\xe7\xf5es adicionais do usu\xe1rio, voc\xea pode usar isso para armazenar arquivos que n\xe3o conseguem corresponder aos dados b\xe1sicos."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Identidades sociais"}),": armazena as informa\xe7\xf5es do usu\xe1rio recuperadas do login social."]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Voc\xea pode criar um mapa para corresponder as informa\xe7\xf5es do usu\xe1rio do seu perfil de usu\xe1rio existente aos ",(0,r.jsx)(s.strong,{children:"dados b\xe1sicos"})," e ",(0,r.jsx)(s.strong,{children:"dados personalizados"}),". Para login social, voc\xea precisar\xe1 de etapas adicionais para importar as identidades sociais, consulte a API de ",(0,r.jsx)(s.a,{href:"https://openapi.logto.io/operation/operation-createuseridentity",children:"Vincular identidade social ao usu\xe1rio"}),"."]}),"\n",(0,r.jsx)(s.h2,{id:"hashing-de-senha",children:"Hashing de senha"}),"\n",(0,r.jsxs)(s.p,{children:["Logto usa ",(0,r.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Argon2",children:"Argon2"})," para hashear a senha do usu\xe1rio e tamb\xe9m suporta outros algoritmos como ",(0,r.jsx)(s.code,{children:"MD5"}),", ",(0,r.jsx)(s.code,{children:"SHA1"}),", ",(0,r.jsx)(s.code,{children:"SHA256"})," e ",(0,r.jsx)(s.code,{children:"Bcrypt"})," para a conveni\xeancia da migra\xe7\xe3o. Esses algoritmos s\xe3o considerados inseguros, os hashes de senha correspondentes ser\xe3o migrados para Argon2 ap\xf3s o primeiro login bem-sucedido do usu\xe1rio."]}),"\n",(0,r.jsxs)(s.p,{children:["Se voc\xea precisar de suporte para algum algoritmo de hashing espec\xedfico, ",(0,r.jsx)(s.a,{href:"https://logto.io/contact",children:"por favor, nos avise"}),"."]}),"\n",(0,r.jsx)(s.h2,{id:"etapas-para-migrar",children:"Etapas para migrar"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Prepare os dados do usu\xe1rio"}),"\nVoc\xea deve primeiro exportar os dados do usu\xe1rio da sua plataforma existente e, em seguida, mapear as informa\xe7\xf5es do usu\xe1rio para o esquema de usu\xe1rio do Logto. Recomendamos que voc\xea prepare os dados mapeados em formato JSON. Aqui est\xe1 um exemplo dos dados do usu\xe1rio:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'[\n  {\n    "username": "user1",\n    "passwordDigest": "password-encrypted",\n    "passwordAlgorithm": "SHA256"\n  },\n  {\n    "username": "user2",\n    "passwordDigest": "password-encrypted",\n    "passwordAlgorithm": "SHA256"\n  }\n]\n'})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Crie um tenant Logto"}),"\nVoc\xea precisar\xe1 configurar um tenant no Logto. Voc\xea pode usar Logto Cloud ou Logto OSS. Se ainda n\xe3o fez isso, consulte o guia ",(0,r.jsx)(s.a,{href:"/introduction/set-up-logto-cloud/#create-logto-tenant",children:"Configurar Logto cloud"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Configurar a conex\xe3o da Management API"}),"\nUsaremos a Management API para importar os dados do usu\xe1rio, voc\xea pode consultar a ",(0,r.jsx)(s.a,{href:"/integrate-logto/interact-with-management-api",children:"Management API"})," para aprender como configurar a conex\xe3o em seu ambiente de desenvolvimento."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Importar os dados do usu\xe1rio"}),"\nRecomenda-se preparar um script para importar os dados do usu\xe1rio um por um, chamaremos a API ",(0,r.jsx)(s.a,{href:"https://openapi.logto.io/operation/operation-createuser",children:"create user"})," para importar os dados do usu\xe1rio. Aqui est\xe1 um exemplo do script:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-jsx",children:"const users = require('./users.json');\n\nconst importUsers = async () => {\n  for (const user of users) {\n    try {\n      await fetch('https://[tenant_id].logto.app/api/users', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: 'Bearer [your-access-token]',\n        },\n        body: JSON.stringify(user),\n      });\n      // Dormir por um tempo para evitar limite de taxa\n      await new Promise((resolve) => setTimeout(resolve, 200));\n    } catch (error) {\n      console.error(`Falha ao importar usu\xe1rio ${user.username}: ${error.message}`);\n    }\n  }\n};\n\nimportUsers();\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Observe que o ponto da API tem limite de taxa, voc\xea deve adicionar uma pausa entre cada solicita\xe7\xe3o para evitar o limite de taxa. Por favor, reveja nossa p\xe1gina de ",(0,r.jsx)(s.a,{href:"/integrate-logto/interact-with-management-api/#rate-limit",children:"limites de taxa"})," para detalhes."]}),"\n",(0,r.jsxs)(s.p,{children:["Se voc\xea tiver uma grande quantidade de dados de usu\xe1rios (100k+ usu\xe1rios), voc\xea pode ",(0,r.jsx)(s.a,{href:"https://logto.io/contact",children:"entrar em contato conosco"})," para aumentar o limite de taxa."]})]})}function p(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},15658:(e,s,o)=>{o.d(s,{R:()=>i,x:()=>t});var a=o(30758);const r={},n=a.createContext(r);function i(e){const s=a.useContext(n);return a.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),a.createElement(n.Provider,{value:s},e.children)}}}]);