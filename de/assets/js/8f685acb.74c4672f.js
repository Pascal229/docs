"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[72706],{84123:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>u,frontMatter:()=>d,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"end-user-flows/account-settings/by-account-api","title":"Kontoeinstellungen \xfcber die Account API","description":"Erfahre, wie du die Account API zur Verwaltung von Benutzern nutzt","source":"@site/i18n/de/docusaurus-plugin-content-docs/current/end-user-flows/account-settings/by-account-api.mdx","sourceDirName":"end-user-flows/account-settings","slug":"/end-user-flows/account-settings/by-account-api","permalink":"/de/end-user-flows/account-settings/by-account-api","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/de/docusaurus-plugin-content-docs/current/end-user-flows/account-settings/by-account-api.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"description":"Erfahre, wie du die Account API zur Verwaltung von Benutzern nutzt","sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Kontoeinstellungen \xfcber Management API","permalink":"/de/end-user-flows/account-settings/by-management-api"},"next":{"title":"Sicherheits\xfcberpr\xfcfung","permalink":"/de/end-user-flows/security-verification/"}}');var t=i(86070),a=i(15658);const d={description:"Erfahre, wie du die Account API zur Verwaltung von Benutzern nutzt",sidebar_position:2},s="Kontoeinstellungen \xfcber die Account API",o={},c=[{value:"Was ist die Logto Account API",id:"was-ist-die-logto-account-api",level:2},{value:"Wie man die Account API aktiviert",id:"wie-man-die-account-api-aktiviert",level:2},{value:"Wie man auf die Account API zugreift",id:"wie-man-auf-die-account-api-zugreift",level:2},{value:"Ein Zugangstoken abrufen",id:"ein-zugangstoken-abrufen",level:3},{value:"Zugriff auf die Account API mit Zugangstoken",id:"zugriff-auf-die-account-api-mit-zugangstoken",level:3},{value:"Grundlegende Kontoinformationen verwalten",id:"grundlegende-kontoinformationen-verwalten",level:2},{value:"Benutzerkontoinformationen abrufen",id:"benutzerkontoinformationen-abrufen",level:3},{value:"Grundlegende Kontoinformationen aktualisieren",id:"grundlegende-kontoinformationen-aktualisieren",level:3},{value:"Identifikatoren und andere sensible Informationen verwalten",id:"identifikatoren-und-andere-sensible-informationen-verwalten",level:2},{value:"Eine Verifizierungsdatensatz-ID erhalten",id:"eine-verifizierungsdatensatz-id-erhalten",level:3},{value:"Das Passwort des Benutzers \xfcberpr\xfcfen",id:"das-passwort-des-benutzers-\xfcberpr\xfcfen",level:4},{value:"\xdcberpr\xfcfung durch Senden eines Verifizierungscodes an die E-Mail oder das Telefon des Benutzers",id:"\xfcberpr\xfcfung-durch-senden-eines-verifizierungscodes-an-die-e-mail-oder-das-telefon-des-benutzers",level:4},{value:"Anfrage mit Verifizierungsdatensatz-ID senden",id:"anfrage-mit-verifizierungsdatensatz-id-senden",level:3},{value:"Neue E-Mail aktualisieren oder verkn\xfcpfen",id:"neue-e-mail-aktualisieren-oder-verkn\xfcpfen",level:3},{value:"E-Mail des Benutzers entfernen",id:"e-mail-des-benutzers-entfernen",level:3},{value:"Telefon verwalten",id:"telefon-verwalten",level:3},{value:"Neue soziale Verbindung verkn\xfcpfen",id:"neue-soziale-verbindung-verkn\xfcpfen",level:3},{value:"Eine soziale Verbindung entfernen",id:"eine-soziale-verbindung-entfernen",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"kontoeinstellungen-\xfcber-die-account-api",children:"Kontoeinstellungen \xfcber die Account API"})}),"\n",(0,t.jsx)(n.h2,{id:"was-ist-die-logto-account-api",children:"Was ist die Logto Account API"}),"\n",(0,t.jsx)(n.p,{children:"Die Logto Account API ist eine umfassende Sammlung von APIs, die den Endbenutzern direkten API-Zugriff erm\xf6glicht, ohne die Management API durchlaufen zu m\xfcssen. Hier sind die Highlights:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Direkter Zugriff: Die Account API erm\xf6glicht es Endbenutzern, direkt auf ihr eigenes Konto zuzugreifen und es zu verwalten, ohne die Weiterleitung der Management API zu ben\xf6tigen."}),"\n",(0,t.jsx)(n.li,{children:"Benutzerprofil- und Identit\xe4tsverwaltung: Benutzer k\xf6nnen ihre Profile und Sicherheitseinstellungen vollst\xe4ndig verwalten, einschlie\xdflich der M\xf6glichkeit, Identit\xe4tsinformationen wie E-Mail, Telefon und Passwort zu aktualisieren sowie soziale Verbindungen zu verwalten. MFA und SSO-Unterst\xfctzung kommen bald."}),"\n",(0,t.jsx)(n.li,{children:"Globale Zugriffskontrolle: Der Administrator hat vollst\xe4ndige, globale Kontrolle \xfcber die Zugriffseinstellungen und kann jedes Feld anpassen."}),"\n",(0,t.jsxs)(n.li,{children:["Nahtlose Autorisierung: Die Autorisierung ist einfacher denn je! Verwende einfach ",(0,t.jsx)(n.code,{children:"client.getAccessToken()"}),", um ein opakes Zugangstoken f\xfcr OP (Logto) zu erhalten, und f\xfcge es dem Authorization-Header als ",(0,t.jsx)(n.code,{children:"Bearer <access_token>"})," hinzu."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Mit der Logto Account API kannst du ein benutzerdefiniertes Kontoverwaltungssystem wie eine Profilseite erstellen, die vollst\xe4ndig in Logto integriert ist."}),"\n",(0,t.jsx)(n.p,{children:"Einige h\xe4ufige Anwendungen sind unten aufgef\xfchrt:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Benutzerprofil abrufen"}),"\n",(0,t.jsx)(n.li,{children:"Benutzerprofil aktualisieren"}),"\n",(0,t.jsx)(n.li,{children:"Benutzerpasswort aktualisieren"}),"\n",(0,t.jsx)(n.li,{children:"Benutzeridentit\xe4ten einschlie\xdflich E-Mail, Telefon und sozialer Verbindungen aktualisieren"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Um mehr \xfcber die verf\xfcgbaren APIs zu erfahren, besuche bitte die ",(0,t.jsx)(n.a,{href:"https://openapi.logto.io/group/endpoint-my-account",children:"Logto Account API Referenz"})," und die ",(0,t.jsx)(n.a,{href:"https://openapi.logto.io/group/endpoint-verifications",children:"Logto Verification API Referenz"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"wie-man-die-account-api-aktiviert",children:"Wie man die Account API aktiviert"}),"\n",(0,t.jsxs)(n.p,{children:["Standardm\xe4\xdfig ist die Account API deaktiviert. Um sie zu aktivieren, musst du die ",(0,t.jsx)(n.a,{href:"/integrate-logto/interact-with-management-api",children:"Management API"})," verwenden, um die globalen Einstellungen zu aktualisieren."]}),"\n",(0,t.jsxs)(n.p,{children:["Der API-Endpunkt ",(0,t.jsx)(n.code,{children:"/api/account-center"})," kann verwendet werden, um die Einstellungen des Account Centers abzurufen und zu aktualisieren. Du kannst ihn verwenden, um die Account API zu aktivieren oder zu deaktivieren und die Felder anzupassen."]}),"\n",(0,t.jsx)(n.p,{children:"Beispielanfrage:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X PATCH https://[tenant-id].logto.app/api/account-center \\\n  -H \'authorization: Bearer <access_token for Logto Management API>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"enabled":true,"fields":{"username":"Edit"}}\'\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Das ",(0,t.jsx)(n.code,{children:"enabled"}),"-Feld wird verwendet, um die Account API zu aktivieren oder zu deaktivieren, und das ",(0,t.jsx)(n.code,{children:"fields"}),"-Feld wird verwendet, um die Felder anzupassen. Der Wert kann ",(0,t.jsx)(n.code,{children:"Off"}),", ",(0,t.jsx)(n.code,{children:"Edit"}),", ",(0,t.jsx)(n.code,{children:"ReadOnly"})," sein. Der Standardwert ist ",(0,t.jsx)(n.code,{children:"Off"}),". Die Liste der Felder:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"name"}),": Das Namensfeld."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"avatar"}),": Das Avatar-Feld."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"profile"}),": Das Profilfeld, einschlie\xdflich seiner Unterfelder."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"username"}),": Das Benutzername-Feld."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"email"}),": Das E-Mail-Feld."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"phone"}),": Das Telefonfeld."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"password"}),": Das Passwortfeld, beim Abrufen wird ",(0,t.jsx)(n.code,{children:"true"})," zur\xfcckgegeben, wenn der Benutzer ein Passwort gesetzt hat, andernfalls ",(0,t.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"social"}),": Soziale Verbindungen."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Erfahre mehr \xfcber die API-Details in der ",(0,t.jsx)(n.a,{href:"https://openapi.logto.io/group/endpoint-account-center",children:"Logto Management API Referenz"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"wie-man-auf-die-account-api-zugreift",children:"Wie man auf die Account API zugreift"}),"\n",(0,t.jsx)(n.h3,{id:"ein-zugangstoken-abrufen",children:"Ein Zugangstoken abrufen"}),"\n",(0,t.jsxs)(n.p,{children:["Nachdem du das SDK in deiner Anwendung eingerichtet hast, kannst du die Methode ",(0,t.jsx)(n.code,{children:"client.getAccessToken()"})," verwenden, um ein Zugangstoken abzurufen. Dieses Token ist ein opakes Token, das zum Zugriff auf die Account API verwendet werden kann."]}),"\n",(0,t.jsxs)(n.p,{children:["Wenn du das offizielle SDK nicht verwendest, solltest du das ",(0,t.jsx)(n.code,{children:"resource"})," f\xfcr die Zugangstoken-Anfrage an ",(0,t.jsx)(n.code,{children:"/oidc/token"})," leer lassen."]}),"\n",(0,t.jsx)(n.h3,{id:"zugriff-auf-die-account-api-mit-zugangstoken",children:"Zugriff auf die Account API mit Zugangstoken"}),"\n",(0,t.jsxs)(n.p,{children:["Du solltest das Zugangstoken im ",(0,t.jsx)(n.code,{children:"Authorization"}),"-Feld der HTTP-Header im Bearer-Format (",(0,t.jsx)(n.code,{children:"Bearer YOUR_TOKEN"}),") platzieren, wenn du mit der Account API interagierst."]}),"\n",(0,t.jsx)(n.p,{children:"Ein Beispiel, um die Benutzerkontoinformationen abzurufen:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl https://[tenant-id].logto.app/api/my-account \\\n  -H 'authorization: Bearer <access_token>'\n"})}),"\n",(0,t.jsx)(n.h2,{id:"grundlegende-kontoinformationen-verwalten",children:"Grundlegende Kontoinformationen verwalten"}),"\n",(0,t.jsx)(n.h3,{id:"benutzerkontoinformationen-abrufen",children:"Benutzerkontoinformationen abrufen"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl https://[tenant-id].logto.app/api/my-account \\\n  -H 'authorization: Bearer <access_token>'\n"})}),"\n",(0,t.jsx)(n.p,{children:"Der Antwortk\xf6rper k\xf6nnte folgenderma\xdfen aussehen:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "id": "...",\n  "username": "...",\n  "name": "...",\n  "avatar": "..."\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Die Antwortfelder k\xf6nnen je nach den Einstellungen des Account Centers variieren."}),"\n",(0,t.jsx)(n.h3,{id:"grundlegende-kontoinformationen-aktualisieren",children:"Grundlegende Kontoinformationen aktualisieren"}),"\n",(0,t.jsx)(n.p,{children:"Grundlegende Kontoinformationen umfassen den Benutzernamen, den Namen, das Avatar und das Profil."}),"\n",(0,t.jsxs)(n.p,{children:["Um Benutzernamen, Namen und Avatar zu aktualisieren, kannst du den Endpunkt ",(0,t.jsx)(n.code,{children:"PATCH /api/my-account"})," verwenden."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X PATCH https://[tenant-id].logto.app/api/my-account \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"username":"...","name":"...","avatar":"..."}\'\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Um das Profil zu aktualisieren, kannst du den Endpunkt ",(0,t.jsx)(n.code,{children:"PATCH /api/my-account/profile"})," verwenden."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X PATCH https://[tenant-id].logto.app/api/my-account/profile \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"familyName":"...","givenName":"..."}\'\n'})}),"\n",(0,t.jsx)(n.h2,{id:"identifikatoren-und-andere-sensible-informationen-verwalten",children:"Identifikatoren und andere sensible Informationen verwalten"}),"\n",(0,t.jsx)(n.p,{children:"Aus Sicherheitsgr\xfcnden erfordert die Account API eine weitere Autorisierungsebene f\xfcr die Vorg\xe4nge, die Identifikatoren und andere sensible Informationen betreffen."}),"\n",(0,t.jsx)(n.h3,{id:"eine-verifizierungsdatensatz-id-erhalten",children:"Eine Verifizierungsdatensatz-ID erhalten"}),"\n",(0,t.jsx)(n.p,{children:"Zuerst musst du eine Verifizierungsdatensatz-ID erhalten, die verwendet werden kann, um die Identit\xe4t des Benutzers beim Aktualisieren von Identifikatoren zu \xfcberpr\xfcfen."}),"\n",(0,t.jsx)(n.p,{children:"Um eine Verifizierungsdatensatz-ID zu erhalten, kannst du das Passwort des Benutzers \xfcberpr\xfcfen oder einen Verifizierungscode an die E-Mail oder das Telefon des Benutzers senden."}),"\n",(0,t.jsx)(n.h4,{id:"das-passwort-des-benutzers-\xfcberpr\xfcfen",children:"Das Passwort des Benutzers \xfcberpr\xfcfen"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl -X POST https://[tenant-id].logto.app/api/verifications/password \\\n  -H 'authorization: Bearer <access_token>' \\\n  -H 'content-type: application/json' \\\n  --data-raw '{\"password\":\"...\"}'\n"})}),"\n",(0,t.jsx)(n.p,{children:"Der Antwortk\xf6rper k\xf6nnte folgenderma\xdfen aussehen:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "verificationRecordId": "...",\n  "expiresAt": "..."\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"\xfcberpr\xfcfung-durch-senden-eines-verifizierungscodes-an-die-e-mail-oder-das-telefon-des-benutzers",children:"\xdcberpr\xfcfung durch Senden eines Verifizierungscodes an die E-Mail oder das Telefon des Benutzers"}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["Um diese Methode zu verwenden, musst du den ",(0,t.jsx)(n.a,{href:"/connectors/email-connectors/",children:"E-Mail-Connector"})," oder ",(0,t.jsx)(n.a,{href:"/connectors/sms-connectors/",children:"SMS-Connector"})," konfigurieren und sicherstellen, dass die ",(0,t.jsx)(n.code,{children:"UserPermissionValidation"}),"-Vorlage konfiguriert ist."]})}),"\n",(0,t.jsx)(n.p,{children:"Nehmen wir E-Mail als Beispiel, fordere einen neuen Verifizierungscode an und erhalte die Verifizierungsdatensatz-ID:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST https://[tenant-id].logto.app/api/verifications/verification-code \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"identifier":{"type":"email","value":"..."}}\'\n'})}),"\n",(0,t.jsx)(n.p,{children:"Der Antwortk\xf6rper k\xf6nnte folgenderma\xdfen aussehen:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "verificationRecordId": "...",\n  "expiresAt": "..."\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Nach Erhalt des Verifizierungscodes kannst du ihn verwenden, um den Verifizierungsstatus des Verifizierungsdatensatzes zu aktualisieren."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X PATCH https://[tenant-id].logto.app/api/verifications/verification-code/verify \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"identifier":{"type":"email","value":"..."},"verificationId":"...","code":"123456"}\'\n'})}),"\n",(0,t.jsx)(n.p,{children:"Nach der \xdcberpr\xfcfung des Codes kannst du nun die Verifizierungsdatensatz-ID verwenden, um den Identifikator des Benutzers zu aktualisieren."}),"\n",(0,t.jsx)(n.h3,{id:"anfrage-mit-verifizierungsdatensatz-id-senden",children:"Anfrage mit Verifizierungsdatensatz-ID senden"}),"\n",(0,t.jsxs)(n.p,{children:["Beim Senden einer Anfrage zur Aktualisierung des Identifikators des Benutzers musst du die Verifizierungsdatensatz-ID an den Anfrage-Header mit dem Feld ",(0,t.jsx)(n.code,{children:"logto-verification-id"})," anh\xe4ngen."]}),"\n",(0,t.jsx)(n.h3,{id:"neue-e-mail-aktualisieren-oder-verkn\xfcpfen",children:"Neue E-Mail aktualisieren oder verkn\xfcpfen"}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["Um diese Methode zu verwenden, musst du den ",(0,t.jsx)(n.a,{href:"/connectors/email-connectors/",children:"E-Mail-Connector"})," konfigurieren und sicherstellen, dass die ",(0,t.jsx)(n.code,{children:"BindNewIdentifier"}),"-Vorlage konfiguriert ist."]})}),"\n",(0,t.jsx)(n.p,{children:"Um eine neue E-Mail zu aktualisieren oder zu verkn\xfcpfen, solltest du zuerst das Eigentum der E-Mail nachweisen."}),"\n",(0,t.jsxs)(n.p,{children:["Rufe den Endpunkt ",(0,t.jsx)(n.code,{children:"POST /api/verifications/verification-code"})," auf, um einen Verifizierungscode anzufordern."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST https://[tenant-id].logto.app/api/verifications/verification-code \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"identifier":{"type":"email","value":"..."}}\'\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Du wirst eine ",(0,t.jsx)(n.code,{children:"verificationId"})," in der Antwort finden und einen Verifizierungscode in der E-Mail erhalten, verwende ihn, um die E-Mail zu \xfcberpr\xfcfen."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X PATCH https://[tenant-id].logto.app/api/verifications/verification-code/verify \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"identifier":{"type":"email","value":"..."},"verificationId":"...","code":"..."}\'\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Nach der \xdcberpr\xfcfung des Codes kannst du nun die E-Mail des Benutzers aktualisieren, setze die ",(0,t.jsx)(n.code,{children:"verificationId"})," in den Anfragek\xf6rper als ",(0,t.jsx)(n.code,{children:"newIdentifierVerificationRecordId"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl -X PATCH https://[tenant-id].logto.app/api/my-account/primary-email \\\n  -H 'authorization: Bearer <access_token>' \\\n  -H 'logto-verification-id: <verification_record_id>' \\\n  -H 'content-type: application/json' \\\n  --data-raw '{\"email\":\"...\",\"newIdentifierVerificationRecordId\":\"...\"}'\n"})}),"\n",(0,t.jsx)(n.h3,{id:"e-mail-des-benutzers-entfernen",children:"E-Mail des Benutzers entfernen"}),"\n",(0,t.jsxs)(n.p,{children:["Um die E-Mail des Benutzers zu entfernen, kannst du den Endpunkt ",(0,t.jsx)(n.code,{children:"DELETE /api/my-account/primary-email"})," verwenden."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl -X DELETE https://[tenant-id].logto.app/api/my-account/primary-email \\\n  -H 'authorization: Bearer <access_token>' \\\n  -H 'logto-verification-id: <verification_record_id>'\n"})}),"\n",(0,t.jsx)(n.h3,{id:"telefon-verwalten",children:"Telefon verwalten"}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["Um diese Methode zu verwenden, musst du den ",(0,t.jsx)(n.a,{href:"/connectors/sms-connectors/",children:"SMS-Connector"})," konfigurieren und sicherstellen, dass die ",(0,t.jsx)(n.code,{children:"BindNewIdentifier"}),"-Vorlage konfiguriert ist."]})}),"\n",(0,t.jsxs)(n.p,{children:["\xc4hnlich wie beim Aktualisieren der E-Mail kannst du den Endpunkt ",(0,t.jsx)(n.code,{children:"PATCH /api/my-account/primary-phone"})," verwenden, um ein neues Telefon zu aktualisieren oder zu verkn\xfcpfen. Und den Endpunkt ",(0,t.jsx)(n.code,{children:"DELETE /api/my-account/primary-phone"}),", um das Telefon des Benutzers zu entfernen."]}),"\n",(0,t.jsx)(n.h3,{id:"neue-soziale-verbindung-verkn\xfcpfen",children:"Neue soziale Verbindung verkn\xfcpfen"}),"\n",(0,t.jsx)(n.p,{children:"Um eine neue soziale Verbindung zu verkn\xfcpfen, solltest du zuerst eine Autorisierungs-URL anfordern:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST https://[tenant-id].logto.app/api/verifications/social \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"connectorId":"...","redirectUri":"...","state":"..."}\'\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"connectorId"}),": Die ID des ",(0,t.jsx)(n.a,{href:"/connectors/social-connectors/",children:"sozialen Connectors"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"redirectUri"}),": Die Umleitungs-URI, nachdem der Benutzer die Anwendung autorisiert hat. Du solltest eine Webseite unter dieser URL hosten und den Callback erfassen."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"state"}),": Der Zustand, der nach der Autorisierung der Anwendung durch den Benutzer zur\xfcckgegeben wird. Es ist eine zuf\xe4llige Zeichenfolge, die verwendet wird, um CSRF-Angriffe zu verhindern."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["In der Antwort findest du eine ",(0,t.jsx)(n.code,{children:"verificationRecordId"}),", bewahre sie f\xfcr die sp\xe4tere Verwendung auf."]}),"\n",(0,t.jsxs)(n.p,{children:["Nachdem der Benutzer die Anwendung autorisiert hat, erh\xe4ltst du einen Callback an die ",(0,t.jsx)(n.code,{children:"redirectUri"})," mit dem ",(0,t.jsx)(n.code,{children:"state"}),"-Parameter. Dann kannst du den Endpunkt ",(0,t.jsx)(n.code,{children:"POST /api/verifications/social/verify"})," verwenden, um die soziale Verbindung zu \xfcberpr\xfcfen."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST https://[tenant-id].logto.app/api/verifications/social/verify \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"connectorData":"...","verificationRecordId":"..."}\'\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Die ",(0,t.jsx)(n.code,{children:"connectorData"})," sind die Daten, die vom sozialen Connector nach der Autorisierung der Anwendung durch den Benutzer zur\xfcckgegeben werden. Du musst die Abfrageparameter von der ",(0,t.jsx)(n.code,{children:"redirectUri"})," auf deiner Callback-Seite analysieren und als JSON als Wert des ",(0,t.jsx)(n.code,{children:"connectorData"}),"-Feldes umwickeln."]}),"\n",(0,t.jsxs)(n.p,{children:["Schlie\xdflich kannst du den Endpunkt ",(0,t.jsx)(n.code,{children:"PATCH /api/my-account/identities"})," verwenden, um die soziale Verbindung zu verkn\xfcpfen."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl -X PATCH https://[tenant-id].logto.app/api/my-account/identities \\\n  -H 'authorization: Bearer <access_token>' \\\n  -H 'logto-verification-id: <verification_record_id>' \\\n  -H 'content-type: application/json' \\\n  --data-raw '{\"newIdentifierVerificationRecordId\":\"...\"}'\n"})}),"\n",(0,t.jsx)(n.h3,{id:"eine-soziale-verbindung-entfernen",children:"Eine soziale Verbindung entfernen"}),"\n",(0,t.jsxs)(n.p,{children:["Um eine soziale Verbindung zu entfernen, kannst du den Endpunkt ",(0,t.jsx)(n.code,{children:"DELETE /api/my-account/identities"})," verwenden."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl -X DELETE https://[tenant-id].logto.app/api/my-account/identities/[connector_target_id] \\\n  -H 'authorization: Bearer <access_token>' \\\n  -H 'logto-verification-id: <verification_record_id>'\n"})})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},15658:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>s});var r=i(30758);const t={},a=r.createContext(t);function d(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);