"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[55202],{38120:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"docs/recipes/single-sign-on/configure-sso/azure-ad","title":"Configure Microsoft Entra ID (Azure AD) SAML SSO","description":"With minimal configuration efforts, this connector allows integration with Microsoft Entra ID (formerly Azure AD) for enterprise SSO.","source":"@site/docs/docs/recipes/single-sign-on/configure-sso/azure-ad.md","sourceDirName":"docs/recipes/single-sign-on/configure-sso","slug":"/docs/recipes/single-sign-on/configure-sso/azure-ad","permalink":"/docs/recipes/single-sign-on/configure-sso/azure-ad","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/docs/docs/recipes/single-sign-on/configure-sso/azure-ad.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_label":"Microsoft Entra ID (SAML)","sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"OIDC","permalink":"/docs/recipes/single-sign-on/configure-sso/oidc"},"next":{"title":"Microsoft Entra ID (OIDC)","permalink":"/docs/recipes/single-sign-on/configure-sso/entra-id-oidc"}}');var n=i(86070),o=i(15658);const r={sidebar_label:"Microsoft Entra ID (SAML)",sidebar_position:3},a="Configure Microsoft Entra ID (Azure AD) SAML SSO",c={},d=[{value:"Step 1: Create an Azure AD SSO application",id:"step-1-create-an-azure-ad-sso-application",level:2},{value:"Step 2: Configure SAML SSO at Logto",id:"step-2-configure-saml-sso-at-logto",level:2},{value:"Step 3: Configure user attributes mapping",id:"step-3-configure-user-attributes-mapping",level:2},{value:"Step 4: Assign users to the Azure AD SSO application",id:"step-4-assign-users-to-the-azure-ad-sso-application",level:2},{value:"Step 5: Set email domains and enable the SSO connector",id:"step-5-set-email-domains-and-enable-the-sso-connector",level:2}];function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"configure-microsoft-entra-id-azure-ad-saml-sso",children:"Configure Microsoft Entra ID (Azure AD) SAML SSO"})}),"\n",(0,n.jsx)(t.p,{children:"With minimal configuration efforts, this connector allows integration with Microsoft Entra ID (formerly Azure AD) for enterprise SSO."}),"\n",(0,n.jsx)(t.h2,{id:"step-1-create-an-azure-ad-sso-application",children:"Step 1: Create an Azure AD SSO application"}),"\n",(0,n.jsx)(t.p,{children:"Initiate the Azure AD SSO integration by creating an SSO application on the Azure AD side."}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["Go to the ",(0,n.jsx)(t.a,{href:"https://portal.azure.com/",children:"Azure portal"})," and sign in as an administrator."]}),"\n",(0,n.jsxs)(t.li,{children:["Select ",(0,n.jsx)(t.code,{children:"Microsoft Entra ID"})," service."]}),"\n",(0,n.jsxs)(t.li,{children:["Navigate to the ",(0,n.jsx)(t.code,{children:"Enterprise applications"})," using the side menu. Click ",(0,n.jsx)(t.code,{children:"New application"}),", and select ",(0,n.jsx)(t.code,{children:"Create your own application"}),"."]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Azure AD create application.webp",src:i(36878).A+"",width:"2084",height:"1463"})}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["Enter the application name and select ",(0,n.jsx)(t.code,{children:"Integrate any other application you don't find in the gallery (Non-gallery)"}),"."]}),"\n",(0,n.jsxs)(t.li,{children:["Select ",(0,n.jsx)(t.code,{children:"Setup single sign-on"})," > ",(0,n.jsx)(t.code,{children:"SAML"}),"."]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Azure AD set up SSO.webp",src:i(61640).A+"",width:"2084",height:"1462"})}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"Follow the instructions, as the first step, you will need to fill in the basic SAML configuration using the following information provided by Logto."}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Azure AD SP config",src:i(71591).A+"",width:"2084",height:"1461"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Audience URI(SP Entity ID)"}),": It represents as a globally unique identifier for your Logto service, functioning as the EntityId for SP during authentication requests to the IdP. This identifier is pivotal for the secure exchange of SAML assertions and other authentication-related data between the IdP and Logto."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"ACS URL"}),": The Assertion Consumer Service (ACS) URL is the location where the SAML assertion is sent with a POST request. This URL is used by the IdP to send the SAML assertion to Logto. It acts as a callback URL where Logto expects to receive and consume the SAML response containing the user's identity information."]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["Click ",(0,n.jsx)(t.code,{children:"Save"})," to continue."]}),"\n",(0,n.jsx)(t.h2,{id:"step-2-configure-saml-sso-at-logto",children:"Step 2: Configure SAML SSO at Logto"}),"\n",(0,n.jsxs)(t.p,{children:["To make the SAML SSO integration work, you will need to provide the IdP metadata back to Logto. Let's switch back to the Logto side, and navigate to the ",(0,n.jsx)(t.code,{children:"Connection"})," tab of your Azure AD SSO connector."]}),"\n",(0,n.jsxs)(t.p,{children:["Logto provides three different ways to configure the IdP metadata. The easiest way is by providing the ",(0,n.jsx)(t.code,{children:"metadata URL"})," of the Azure AD SSO application."]}),"\n",(0,n.jsxs)(t.p,{children:["Copy the ",(0,n.jsx)(t.code,{children:"App Federation Metadata Url"})," from your Azure AD SSO application's ",(0,n.jsx)(t.code,{children:"SAML Certificates section"})," and paste it into the ",(0,n.jsx)(t.code,{children:"Metadata URL"})," field in Logto."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Azure AD Metadata URL.webp",src:i(11420).A+"",width:"2084",height:"1462"})}),"\n",(0,n.jsx)(t.p,{children:"Logto will fetch the metadata from the URL and configure the SAML SSO integration automatically."}),"\n",(0,n.jsx)(t.h2,{id:"step-3-configure-user-attributes-mapping",children:"Step 3: Configure user attributes mapping"}),"\n",(0,n.jsx)(t.p,{children:"Logto provides a flexible way to map the user attributes returned from IdP to the user attributes in Logto. Logto will sync the following user attributes from IdP by default:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["id: The unique identifier of the user. Logto will read the ",(0,n.jsx)(t.code,{children:"nameID"})," claim from the SAML response as the user SSO identity id."]}),"\n",(0,n.jsxs)(t.li,{children:["email: The email address of the user. Logto will read the ",(0,n.jsx)(t.code,{children:"email"})," claim from the SAML response as the user primary email by default."]}),"\n",(0,n.jsx)(t.li,{children:"name: The name of the user."}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"You may manage the user attributes mapping logic either on the Azure AD side or Logto side."}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Map the AzureAD user attributes to Logto user attributes on Logto side."}),"\n",(0,n.jsxs)(t.p,{children:["Visit the ",(0,n.jsx)(t.code,{children:"Attributes & Claims"})," section of your Azure AD SSO application."]}),"\n",(0,n.jsx)(t.p,{children:"Copy the following attribute names (with namespace prefix) and paste them into the corresponding fields in Logto."}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.code,{children:"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress"})}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"})," (Recommendation: update this attribute value map to ",(0,n.jsx)(t.code,{children:"user.displayname"})," for better user experience)a"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Azure AD default attribute mapping.webp",src:i(15382).A+"",width:"6252",height:"3504"})}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Map the AzureAD user attributes to Logto user attributes at the AzureAD side."}),"\n",(0,n.jsxs)(t.p,{children:["Visit the ",(0,n.jsx)(t.code,{children:"Attributes & Claims"})," section of your Azure AD SSO application."]}),"\n",(0,n.jsxs)(t.p,{children:["Click on ",(0,n.jsx)(t.code,{children:"Edit"}),", and update the ",(0,n.jsx)(t.code,{children:"Additional claims"})," fields based on the Logto user attributes settings:"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"update the claim name value based on the Logto user attributes settings."}),"\n",(0,n.jsx)(t.li,{children:"remove the namespace prefix."}),"\n",(0,n.jsxs)(t.li,{children:["click ",(0,n.jsx)(t.code,{children:"Save"})," to continue."]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"Should end up with the following settings:"}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Azure AD_Logto attribute mapping.webp",src:i(68860).A+"",width:"6252",height:"3162"})}),"\n",(0,n.jsxs)(t.p,{children:["You may also specify additional user attributes on the Azure AD side. Logto will keep a record of the original user attributes returned from IdP under the user's ",(0,n.jsx)(t.code,{children:"sso_identity"})," field."]}),"\n",(0,n.jsx)(t.h2,{id:"step-4-assign-users-to-the-azure-ad-sso-application",children:"Step 4: Assign users to the Azure AD SSO application"}),"\n",(0,n.jsxs)(t.p,{children:["Visit the ",(0,n.jsx)(t.code,{children:"Users and groups"})," section of your Azure AD SSO application. Click on ",(0,n.jsx)(t.code,{children:"Add user/group"})," to assign users to the Azure AD SSO application. Only users assigned to your Azure AD SSO application will be able to authenticate through the Azure AD SSO connector."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Azure AD assign users.webp",src:i(75473).A+"",width:"6705",height:"2931"})}),"\n",(0,n.jsx)(t.h2,{id:"step-5-set-email-domains-and-enable-the-sso-connector",children:"Step 5: Set email domains and enable the SSO connector"}),"\n",(0,n.jsxs)(t.p,{children:["Provide the ",(0,n.jsx)(t.code,{children:"email domains"})," of your organization at Logto's connector ",(0,n.jsx)(t.code,{children:"SSO experience"})," tab. This will enable the SSO connector as an authentication method for those users."]}),"\n",(0,n.jsx)(t.p,{children:"Users with email addresses in the specified domains will be redirected to use the SAML SSO connector as their only authentication method."}),"\n",(0,n.jsxs)(t.p,{children:["Please check Azure AD's official ",(0,n.jsx)(t.a,{href:"https://learn.microsoft.com/en-us/entra/identity/enterprise-apps/add-application-portal-setup-sso",children:"documentation"})," for more details about the Azure AD SSO integration."]})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},75473:(e,t,i)=>{i.d(t,{A:()=>s});const s=i.p+"assets/images/azure_ad_assign_users-8997b6906f1d43ddd66069d053cc429d.webp"},36878:(e,t,i)=>{i.d(t,{A:()=>s});const s=i.p+"assets/images/azure_ad_create_application-53a2881e548a2da0b8da4aa413fffaf6.webp"},15382:(e,t,i)=>{i.d(t,{A:()=>s});const s=i.p+"assets/images/azure_ad_default_attribute_mapping-ef77c6b868372f41ae3a35d0f0e78e1b.webp"},68860:(e,t,i)=>{i.d(t,{A:()=>s});const s=i.p+"assets/images/azure_ad_logto_attribute_mapping-06c15edd5383d728d128338558e0c63b.webp"},11420:(e,t,i)=>{i.d(t,{A:()=>s});const s=i.p+"assets/images/azure_ad_metadata_url-a2a6ca0844e0c42a80f36a0fc6c115b9.webp"},61640:(e,t,i)=>{i.d(t,{A:()=>s});const s=i.p+"assets/images/azure_ad_set_up_single_sign_on-43a54d9878b88ef6473961b222377b47.webp"},71591:(e,t,i)=>{i.d(t,{A:()=>s});const s=i.p+"assets/images/azure_ad_sp_config-fceb6b9a77f55d69d13b6ae94a9fc773.webp"},15658:(e,t,i)=>{i.d(t,{R:()=>r,x:()=>a});var s=i(30758);const n={},o=s.createContext(n);function r(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);