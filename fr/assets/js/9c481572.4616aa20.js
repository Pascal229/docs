"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[89978],{97908:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>t,toc:()=>u});const t=JSON.parse('{"id":"developers/custom-token-claims/common-use-cases","title":"Cas d\'utilisation courants","description":"Dans cette section, nous fournirons quelques exemples pour vous aider \xe0 comprendre certains sc\xe9narios o\xf9 les revendications de jetons personnalis\xe9s peuvent \xeatre utiles, vous offrant ainsi quelques r\xe9f\xe9rences. De cette fa\xe7on, lorsque vous rencontrez des difficult\xe9s dans la gestion des acc\xe8s, vous pouvez \xe9valuer si les revendications de jetons personnalis\xe9s peuvent vous apporter de la commodit\xe9.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/developers/custom-token-claims/common-use-cases.mdx","sourceDirName":"developers/custom-token-claims","slug":"/developers/custom-token-claims/common-use-cases","permalink":"/fr/developers/custom-token-claims/common-use-cases","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/fr/docusaurus-plugin-content-docs/current/developers/custom-token-claims/common-use-cases.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"common-use-cases","title":"Cas d\'utilisation courants","sidebar_label":"Cas d\'utilisation courants","sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Revendications de jetons personnalis\xe9s","permalink":"/fr/developers/custom-token-claims/"},"next":{"title":"Cr\xe9er un script de revendications de jeton personnalis\xe9","permalink":"/fr/developers/custom-token-claims/create-script"}}');var o=n(86070),i=n(15658);const r={id:"common-use-cases",title:"Cas d'utilisation courants",sidebar_label:"Cas d'utilisation courants",sidebar_position:2},a="Cas d'utilisation courants",l={},u=[{value:"Rendre possible le contr\xf4le d&#39;acc\xe8s bas\xe9 sur les attributs (ABAC)",id:"rendre-possible-le-contr\xf4le-dacc\xe8s-bas\xe9-sur-les-attributs-abac",level:2},{value:"Bloquer manuellement l&#39;\xe9mission de jetons",id:"bloquer-manuellement-l\xe9mission-de-jetons",level:2}];function c(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",...(0,i.R)(),...e.components},{Url:n}=s;return n||function(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Url",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"cas-dutilisation-courants",children:"Cas d'utilisation courants"})}),"\n",(0,o.jsx)(s.p,{children:"Dans cette section, nous fournirons quelques exemples pour vous aider \xe0 comprendre certains sc\xe9narios o\xf9 les revendications de jetons personnalis\xe9s peuvent \xeatre utiles, vous offrant ainsi quelques r\xe9f\xe9rences. De cette fa\xe7on, lorsque vous rencontrez des difficult\xe9s dans la gestion des acc\xe8s, vous pouvez \xe9valuer si les revendications de jetons personnalis\xe9s peuvent vous apporter de la commodit\xe9."}),"\n",(0,o.jsx)(s.h2,{id:"rendre-possible-le-contr\xf4le-dacc\xe8s-bas\xe9-sur-les-attributs-abac",children:"Rendre possible le contr\xf4le d'acc\xe8s bas\xe9 sur les attributs (ABAC)"}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.a,{href:"https://auth.wiki/abac",children:"Le contr\xf4le d'acc\xe8s bas\xe9 sur les attributs (ABAC)"})," est un mod\xe8le de contr\xf4le d'acc\xe8s qui utilise des attributs (tels que les r\xf4les des utilisateurs, les propri\xe9t\xe9s des ressources et les conditions environnementales) pour prendre des d\xe9cisions de contr\xf4le d'acc\xe8s. C'est un moyen flexible et dynamique de g\xe9rer l'acc\xe8s aux ressources prot\xe9g\xe9es."]}),"\n",(0,o.jsx)(s.p,{children:"Supposons que vous construisiez une application, et que la sortie de l'application soit divis\xe9e en deux phases : b\xeata publique et lancement officiel. M\xeame apr\xe8s le lancement officiel de l'application, vous souhaitez que les anciens utilisateurs ayant particip\xe9 \xe0 la b\xeata publique continuent \xe0 utiliser les fonctionnalit\xe9s payantes."}),"\n",(0,o.jsxs)(s.p,{children:["Apr\xe8s le lancement officiel de l'application, vous utilisez la fonctionnalit\xe9 de ",(0,o.jsx)(s.a,{href:"https://auth.wiki/rbac",children:"contr\xf4le d'acc\xe8s bas\xe9 sur les r\xf4les (RBAC)"})," de Logto pour mettre en \u0153uvre le contr\xf4le d'acc\xe8s pour l'utilisation des fonctionnalit\xe9s payantes. Pour v\xe9rifier facilement si un utilisateur utilisait d\xe9j\xe0 l'application pendant la phase b\xeata publique, vous pouvez utiliser la m\xe9thode ",(0,o.jsx)(s.code,{children:"getCustomJwtClaims()"})," pour ajouter une revendication ",(0,o.jsx)(s.code,{children:"createdAt"})," dans la charge utile du jeton."]}),"\n",(0,o.jsx)(s.p,{children:"Ensuite, lors du contr\xf4le d'acc\xe8s dans vos API prot\xe9g\xe9es, vous devez autoriser les jetons d\u2019acc\xe8s qui r\xe9pondent \xe0 l'une des conditions suivantes :"}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsx)(s.li,{children:"Avec le contexte RBAC, avoir la port\xe9e pour acc\xe9der aux ressources payantes."}),"\n",(0,o.jsxs)(s.li,{children:["Le ",(0,o.jsx)(s.code,{children:"createdAt"})," est ant\xe9rieur \xe0 la fin de la phase b\xeata publique."]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:"S'il n'y a pas de fonctionnalit\xe9 de revendications de jetons personnalis\xe9s, lors de la v\xe9rification des permissions pour les ressources API prot\xe9g\xe9es, il est n\xe9cessaire d'appeler le Logto Management API pour v\xe9rifier si l'utilisateur avec le jeton d\u2019acc\xe8s actuel a les permissions correspondant au r\xf4le requis par une certaine ressource API."}),"\n",(0,o.jsx)(s.p,{children:"Dans un sc\xe9nario similaire, supposons que votre application affiche des v\u0153ux d'anniversaire sur la page de connexion si l'anniversaire de l'utilisateur approche. Vous pouvez utiliser des revendications de jetons personnalis\xe9s pour ajouter un champ d'anniversaire \xe0 la charge utile du jeton, qui peut \xeatre utilis\xe9 pour d\xe9terminer s'il faut afficher un message sp\xe9cifique."}),"\n",(0,o.jsx)(s.h2,{id:"bloquer-manuellement-l\xe9mission-de-jetons",children:"Bloquer manuellement l'\xe9mission de jetons"}),"\n",(0,o.jsxs)(s.p,{children:["Supposons que Joe g\xe8re un jeu en ligne et utilise Logto comme syst\xe8me de ",(0,o.jsx)(s.a,{href:"https://auth.wiki/iam",children:"gestion des identit\xe9s et des acc\xe8s (IAM)"}),"."]}),"\n",(0,o.jsx)(s.p,{children:"Supposons que ce jeu n\xe9cessite des recharges pour acheter du temps de jeu. Joe enregistre le solde de chaque utilisateur dans son service de jeu et d\xe9duit continuellement du solde \xe0 mesure que le temps de jeu s'accumule. Joe veut forcer les joueurs \xe0 se d\xe9connecter lorsque leur solde est \xe9puis\xe9 pour les encourager \xe0 recharger."}),"\n",(0,o.jsx)(s.p,{children:"\xc0 ce stade, Joe peut \xe9galement utiliser la fonctionnalit\xe9 de revendications de jetons personnalis\xe9s fournie par Logto pour y parvenir :"}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsxs)(s.li,{children:["Dans le script, un appel API externe ",(0,o.jsx)(s.a,{href:"/developers/custom-token-claims/create-script/#step-3-fetch-external-data",children:"fetch external data"})," peut \xeatre utilis\xe9 pour r\xe9cup\xe9rer le solde actuel du joueur depuis le serveur de jeu de Joe."]}),"\n",(0,o.jsxs)(s.li,{children:["Si le solde est inf\xe9rieur ou \xe9gal \xe0 0, la m\xe9thode ",(0,o.jsx)(n,{type:"inline",href:"/developers/custom-token-claims/create-script/#api",children:(0,o.jsx)(s.code,{children:"api.denyAccess()"})})," peut \xeatre utilis\xe9e pour bloquer l'\xe9mission de jetons."]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:"\xc0 ce moment-l\xe0, comme un nouveau jeton d\u2019acc\xe8s valide ne peut pas \xeatre obtenu, le joueur sera forc\xe9 de se d\xe9connecter du jeu."})]})}function d(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},15658:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>a});var t=n(30758);const o={},i=t.createContext(o);function r(e){const s=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);