"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[16400],{78856:(e,a,r)=>{r.r(a),r.d(a,{assets:()=>u,contentTitle:()=>c,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"logto-oss/using-cli/rotate-signing-keys","title":"Rotar claves de firma (OSS)","description":"Si est\xe1s utilizando Logto Cloud, puedes rotar las claves de firma en la interfaz de usuario de la Consola, por favor consulta este tutorial.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/logto-oss/using-cli/rotate-signing-keys.mdx","sourceDirName":"logto-oss/using-cli","slug":"/logto-oss/using-cli/rotate-signing-keys","permalink":"/es/logto-oss/using-cli/rotate-signing-keys","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/es/docusaurus-plugin-content-docs/current/logto-oss/using-cli/rotate-signing-keys.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Migrar configuraciones desde env","permalink":"/es/logto-oss/using-cli/migrate-from-env"},"next":{"title":"Traducci\xf3n CLI","permalink":"/es/logto-oss/translate-cli"}}');var n=r(86070),s=r(15658),t=r(78551),l=r(77501);const i={},c="Rotar claves de firma (OSS)",u={},d=[{value:"Rotar claves de firma privadas OIDC",id:"rotar-claves-de-firma-privadas-oidc",level:2},{value:"Rotar claves de cookies OIDC",id:"rotar-claves-de-cookies-oidc",level:2},{value:"\xbfQu\xe9 pasa con las claves anteriores?",id:"qu\xe9-pasa-con-las-claves-anteriores",level:2},{value:"Soluci\xf3n de problemas",id:"soluci\xf3n-de-problemas",level:2},{value:"Usar Logto como proveedor OIDC en Cloudflare Zero Trust",id:"usar-logto-como-proveedor-oidc-en-cloudflare-zero-trust",level:3}];function p(e){const a={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.header,{children:(0,n.jsx)(a.h1,{id:"rotar-claves-de-firma-oss",children:"Rotar claves de firma (OSS)"})}),"\n",(0,n.jsx)(a.admonition,{type:"note",children:(0,n.jsxs)(a.p,{children:["Si est\xe1s utilizando Logto Cloud, puedes rotar las claves de firma en la interfaz de usuario de la Consola, por favor consulta ",(0,n.jsx)(a.a,{href:"/developers/signing-keys/#rotate-signing-keys-from-console-ui",children:"este tutorial"}),"."]})}),"\n",(0,n.jsx)(a.p,{children:"Logto OSS ha soportado la rotaci\xf3n de claves de firma desde la versi\xf3n v1.8."}),"\n",(0,n.jsx)(a.p,{children:'Las claves de firma de Logto OIDC, tambi\xe9n conocidas como "claves privadas OIDC" y "claves de cookies OIDC", son las claves de firma utilizadas para cifrar tokens JWT (tokens de acceso y tokens de ID) y cookies del navegador en las sesiones de inicio de sesi\xf3n de Logto.'}),"\n",(0,n.jsx)(a.p,{children:"Rotar tus claves de firma regularmente puede reducir los riesgos de un posible compromiso de las claves. Logto recomienda rotar tus claves de firma al menos una vez al a\xf1o."}),"\n",(0,n.jsx)(a.h2,{id:"rotar-claves-de-firma-privadas-oidc",children:"Rotar claves de firma privadas OIDC"}),"\n",(0,n.jsx)(a.p,{children:"Usa el siguiente comando CLI para generar una nueva clave de firma privada OIDC. La nueva clave se utilizar\xe1 autom\xe1ticamente despu\xe9s de reiniciar."}),"\n",(0,n.jsx)(a.p,{children:"Opciones disponibles:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{children:'--type    (Opcional) El algoritmo de clave de firma para tus tokens JWT.\n          Los valores son "rsa" o "ec". Por defecto es "ec".\n'})}),"\n",(0,n.jsxs)(l.A,{groupId:"cmd",children:[(0,n.jsx)(t.A,{value:"cli",label:"CLI",children:(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"logto db config rotate oidc.privateKeys --type rsa\n"})})}),(0,n.jsx)(t.A,{value:"Local",label:"local",children:(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"npm run cli db config rotate oidc.privateKeys -- --type rsa\n"})})}),(0,n.jsx)(t.A,{value:"npx",label:"npx",children:(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"npx @logto/cli db config rotate oidc.privateKeys -- --type rsa\n"})})})]}),"\n",(0,n.jsx)(a.h2,{id:"rotar-claves-de-cookies-oidc",children:"Rotar claves de cookies OIDC"}),"\n",(0,n.jsx)(a.p,{children:"Usa el siguiente comando CLI para generar una nueva clave de cookies OIDC. La nueva clave se utilizar\xe1 autom\xe1ticamente despu\xe9s de reiniciar."}),"\n",(0,n.jsxs)(l.A,{groupId:"cmd",children:[(0,n.jsx)(t.A,{value:"cli",label:"CLI",children:(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"logto db config rotate oidc.cookieKeys\n"})})}),(0,n.jsx)(t.A,{value:"Local",label:"local",children:(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"npm run cli db config rotate oidc.cookieKeys\n"})})}),(0,n.jsx)(t.A,{value:"npx",label:"npx",children:(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"npx @logto/cli db config rotate oidc.cookieKeys\n"})})})]}),"\n",(0,n.jsx)(a.h2,{id:"qu\xe9-pasa-con-las-claves-anteriores",children:"\xbfQu\xe9 pasa con las claves anteriores?"}),"\n",(0,n.jsx)(a.p,{children:"Los comandos de rotaci\xf3n de claves de Logto no eliminar\xe1n tus claves de firma anteriores, y se mantendr\xe1n en la base de datos a menos que las elimines manualmente."}),"\n",(0,n.jsx)(a.p,{children:"Adem\xe1s, ten cuidado al eliminar tus claves anteriores, ya que puede causar problemas inesperados. Se recomienda mantener tanto la nueva clave como la clave anterior durante un per\xedodo de tiempo (por ejemplo, 2 semanas), hasta que est\xe9s seguro de que todos tus usuarios han migrado a la nueva clave."}),"\n",(0,n.jsx)(a.h2,{id:"soluci\xf3n-de-problemas",children:"Soluci\xf3n de problemas"}),"\n",(0,n.jsx)(a.h3,{id:"usar-logto-como-proveedor-oidc-en-cloudflare-zero-trust",children:"Usar Logto como proveedor OIDC en Cloudflare Zero Trust"}),"\n",(0,n.jsxs)(a.p,{children:["Si planeas usar Logto como un proveedor OIDC con Cloudflare Zero Trust, ten en cuenta que no admite proveedores OIDC que utilicen algoritmos ECDSA. Al rotar las claves de firma privadas OIDC, aseg\xfarate de usar el algoritmo RSA especificando ",(0,n.jsx)(a.code,{children:"--type rsa"})," en el comando de rotaci\xf3n:"]}),"\n",(0,n.jsxs)(l.A,{groupId:"cmd-cloudflare-zero-trust",children:[(0,n.jsx)(t.A,{value:"cli",label:"CLI",children:(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"logto db config rotate oidc.privateKeys --type rsa\n"})})}),(0,n.jsx)(t.A,{value:"Local",label:"local",children:(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"npm run cli db config rotate oidc.privateKeys -- --type rsa\n"})})}),(0,n.jsx)(t.A,{value:"npx",label:"npx",children:(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"npx @logto/cli db config rotate oidc.privateKeys -- --type rsa\n"})})})]})]})}function m(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(p,{...e})}):p(e)}},78551:(e,a,r)=>{r.d(a,{A:()=>t});r(30758);var o=r(13526);const n={tabItem:"tabItem_PGP0"};var s=r(86070);function t(e){let{children:a,hidden:r,className:t}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,o.A)(n.tabItem,t),hidden:r,children:a})}},77501:(e,a,r)=>{r.d(a,{A:()=>I});var o=r(30758),n=r(13526),s=r(65052),t=r(25557),l=r(77469),i=r(50873),c=r(62230),u=r(60196);function d(e){return o.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:a}=e;return!!a&&"object"==typeof a&&"value"in a}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:a,children:r}=e;return(0,o.useMemo)((()=>{const e=a??function(e){return d(e).map((e=>{let{props:{value:a,label:r,attributes:o,default:n}}=e;return{value:a,label:r,attributes:o,default:n}}))}(r);return function(e){const a=(0,c.XI)(e,((e,a)=>e.value===a.value));if(a.length>0)throw new Error(`Docusaurus error: Duplicate values "${a.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[a,r])}function m(e){let{value:a,tabValues:r}=e;return r.some((e=>e.value===a))}function v(e){let{queryString:a=!1,groupId:r}=e;const n=(0,t.W6)(),s=function(e){let{queryString:a=!1,groupId:r}=e;if("string"==typeof a)return a;if(!1===a)return null;if(!0===a&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:a,groupId:r});return[(0,i.aZ)(s),(0,o.useCallback)((e=>{if(!s)return;const a=new URLSearchParams(n.location.search);a.set(s,e),n.replace({...n.location,search:a.toString()})}),[s,n])]}function h(e){const{defaultValue:a,queryString:r=!1,groupId:n}=e,s=p(e),[t,i]=(0,o.useState)((()=>function(e){let{defaultValue:a,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(a){if(!m({value:a,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${a}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return a}const o=r.find((e=>e.default))??r[0];if(!o)throw new Error("Unexpected error: 0 tabValues");return o.value}({defaultValue:a,tabValues:s}))),[c,d]=v({queryString:r,groupId:n}),[h,g]=function(e){let{groupId:a}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(a),[n,s]=(0,u.Dv)(r);return[n,(0,o.useCallback)((e=>{r&&s.set(e)}),[r,s])]}({groupId:n}),f=(()=>{const e=c??h;return m({value:e,tabValues:s})?e:null})();(0,l.A)((()=>{f&&i(f)}),[f]);return{selectedValue:t,selectValue:(0,o.useCallback)((e=>{if(!m({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);i(e),d(e),g(e)}),[d,g,s]),tabValues:s}}var g=r(13887);const f={tabList:"tabList_CGfx",tabItem:"tabItem_JX1E"};var b=r(86070);function x(e){let{className:a,block:r,selectedValue:o,selectValue:t,tabValues:l}=e;const i=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.a_)(),u=e=>{const a=e.currentTarget,r=i.indexOf(a),n=l[r].value;n!==o&&(c(a),t(n))},d=e=>{let a=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const r=i.indexOf(e.currentTarget)+1;a=i[r]??i[0];break}case"ArrowLeft":{const r=i.indexOf(e.currentTarget)-1;a=i[r]??i[i.length-1];break}}a?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,n.A)("tabs",{"tabs--block":r},a),children:l.map((e=>{let{value:a,label:r,attributes:s}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:o===a?0:-1,"aria-selected":o===a,ref:e=>i.push(e),onKeyDown:d,onClick:u,...s,className:(0,n.A)("tabs__item",f.tabItem,s?.className,{"tabs__item--active":o===a}),children:r??a},a)}))})}function j(e){let{lazy:a,children:r,selectedValue:s}=e;const t=(Array.isArray(r)?r:[r]).filter(Boolean);if(a){const e=t.find((e=>e.props.value===s));return e?(0,o.cloneElement)(e,{className:(0,n.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:t.map(((e,a)=>(0,o.cloneElement)(e,{key:a,hidden:e.props.value!==s})))})}function y(e){const a=h(e);return(0,b.jsxs)("div",{className:(0,n.A)("tabs-container",f.tabList),children:[(0,b.jsx)(x,{...a,...e}),(0,b.jsx)(j,{...a,...e})]})}function I(e){const a=(0,g.A)();return(0,b.jsx)(y,{...e,children:d(e.children)},String(a))}},15658:(e,a,r)=>{r.d(a,{R:()=>t,x:()=>l});var o=r(30758);const n={},s=o.createContext(n);function t(e){const a=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function l(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:t(e.components),o.createElement(s.Provider,{value:a},e.children)}}}]);