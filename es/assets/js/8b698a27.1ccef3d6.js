"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[89422],{76539:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>f,contentTitle:()=>j,default:()=>w,frontMatter:()=>x,metadata:()=>t,toc:()=>b});const t=JSON.parse('{"id":"quick-starts/framework/flutterflow/README","title":"Personaliza el FlutterFlow CustomAuthManager usando Logto SDK","description":"FlutterFlow tiene una funci\xf3n incorporada de autenticaci\xf3n personalizada que te permite autenticar usuarios usando tu propio backend. Sin embargo, el flujo de autenticaci\xf3n personalizada incorporado fue dise\xf1ado para trabajar con una sola llamada a la API de autenticaci\xf3n. Si est\xe1s utilizando un Proveedor de Identidad (IdP) de terceros, la solicitud de autenticaci\xf3n solo se puede realizar utilizando el tipo de concesi\xf3n Resource Owner Password Credentials, lo cual no se recomienda para uso en producci\xf3n. Consulta Tipo de concesi\xf3n ropc obsoleto para m\xe1s detalles.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/quick-starts/framework/flutterflow/README.mdx","sourceDirName":"quick-starts/framework/flutterflow","slug":"/quick-starts/flutter-flow","permalink":"/es/quick-starts/flutter-flow","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/es/docusaurus-plugin-content-docs/current/quick-starts/framework/flutterflow/README.mdx","tags":[],"version":"current","frontMatter":{"slug":"/quick-starts/flutter-flow","sidebar_label":"FlutterFlow","sidebar_custom_props":{"description":"FlutterFlow es un marco de bajo c\xf3digo para construir aplicaciones h\xedbridas en Flutter."}},"sidebar":"quickStartSidebar","previous":{"title":"Flutter","permalink":"/es/quick-starts/flutter"},"next":{"title":"Go","permalink":"/es/quick-starts/go"}}');var i=n(86070),r=n(15658);function o(e){const a={code:"code",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-dart",children:"// lib/auth/custom_auth/custom_auth_manager.dart\n\nimport 'dart:async';\n\nimport 'package:flutter/foundation.dart';\nimport 'package:http/http.dart' as http;\nimport 'package:logto_dart_sdk/logto_client.dart';\nimport 'package:logto_dart_sdk/src/modules/id_token.dart';\n\nimport 'custom_auth_user_provider.dart';\n\nexport 'custom_auth_manager.dart';\n\n\nclass CustomAuthManager {\n  late LogtoClient logtoClient;\n\n  final logtoConfig = const LogtoConfig(\n      appId: '<YOUR-APP-ID>',\n      endpoint: '<YOUR-LOGTO-ENDPOINT>');\n\n\n  // ...\n\n  FlutterFlowAuthAuthUser? _updateCurrentUser(\n      {bool loggedIn = false, String? uid, OpenIdClaims? idToken}) {\n    // Update the current user stream.\n    final updatedUser = FlutterFlowAuthAuthUser(\n      loggedIn: loggedIn,\n      uid: uid,\n      idToken: idToken,\n    );\n\n    flutterFlowAuthAuthUserSubject.add(updatedUser);\n\n    return updatedUser;\n  }\n\n  Future initialize() async {\n    logtoClient = LogtoClient(config: logtoConfig, httpClient: http.Client());\n\n    late OpenIdClaims? idToken;\n\n    try {\n      idToken = await logtoClient.idTokenClaims;\n    } catch (e) {\n      if (kDebugMode) {\n        print('Error initializing auth: $e');\n      }\n    }\n\n    _updateCurrentUser(\n        loggedIn: idToken != null, uid: idToken?.subject, idToken: idToken);\n  }\n}\n\nFlutterFlowAuthAuthUser? currentUser;\nbool get loggedIn => currentUser?.loggedIn ?? false;\n\n"})})}function l(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,i.jsx)(a,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}function s(e){const a={code:"code",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-dart",children:"// lib/auth/custom_auth/custom_auth_user_provider.dart\n\nimport 'package:logto_dart_sdk/src/modules/id_token.dart';\nimport 'package:rxdart/rxdart.dart';\n\nimport 'custom_auth_manager.dart';\n\nclass FlutterFlowAuthAuthUser {\n  FlutterFlowAuthAuthUser({required this.loggedIn, this.uid, this.idToken});\n\n  bool loggedIn;\n  String? uid;\n  OpenIdClaims? idToken;\n}\n\n/// Genera un flujo del usuario autenticado.\nBehaviorSubject<FlutterFlowAuthAuthUser> flutterFlowAuthAuthUserSubject =\n    BehaviorSubject.seeded(FlutterFlowAuthAuthUser(loggedIn: false));\nStream<FlutterFlowAuthAuthUser> flutterFlowAuthAuthUserStream() =>\n    flutterFlowAuthAuthUserSubject\n        .asBroadcastStream()\n        .map((user) => currentUser = user);\n\n"})})}function d(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,i.jsx)(a,{...e,children:(0,i.jsx)(s,{...e})}):s(e)}function c(e){const a={a:"a",admonition:"admonition",code:"code",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components},{Details:n}=a;return n||function(e,a){throw new Error("Expected "+(a?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:"flutter_secure_storage"}),(0,i.jsxs)(a.p,{children:["Usamos ",(0,i.jsx)(a.a,{href:"https://pub.dev/packages/flutter_secure_storage",children:"flutter_secure_storage"})," para implementar el almacenamiento seguro persistente de tokens multiplataforma. Bajo el cap\xf3:"]}),(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:"Se utiliza Keychain para iOS"}),"\n",(0,i.jsx)(a.li,{children:"Se utiliza cifrado AES para Android."}),"\n"]}),(0,i.jsx)(a.h3,{id:"configurar-la-versi\xf3n-de-android",children:"Configurar la versi\xf3n de Android:"}),(0,i.jsx)(a.p,{children:"En [project]/android/app/build.gradle establece minSdkVersion a >= 18."}),(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-kotlin",children:"  android {\n      ...\n\n      defaultConfig {\n          ...\n          minSdkVersion 18\n          ...\n      }\n  }\n"})}),(0,i.jsx)(a.h3,{id:"desactivar-la-copia-de-seguridad-autom\xe1tica",children:"Desactivar la copia de seguridad autom\xe1tica:"}),(0,i.jsx)(a.admonition,{type:"note",children:(0,i.jsxs)(a.p,{children:["Por defecto, Android realiza copias de seguridad de los datos en Google Drive. Esto puede causar la excepci\xf3n java.security.InvalidKeyException",":Failed"," to unwrap key."]})}),(0,i.jsx)(a.p,{children:"Para evitar esto, puedes desactivar la copia de seguridad autom\xe1tica para tu aplicaci\xf3n o excluir sharedprefs de FlutterSecureStorage."}),(0,i.jsxs)(a.ol,{children:["\n",(0,i.jsxs)(a.li,{children:["\n",(0,i.jsx)(a.p,{children:"Para desactivar la copia de seguridad autom\xe1tica, ve a tu archivo de manifiesto de la aplicaci\xf3n y establece el valor booleano android:allowBackup:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-xml",children:'<manifest ... >\n    ...\n    <application\n      android:allowBackup="false"\n      android:fullBackupContent="false"\n      ...\n    >\n        ...\n    </application>\n</manifest>\n\n'})}),"\n"]}),"\n",(0,i.jsxs)(a.li,{children:["\n",(0,i.jsx)(a.p,{children:"Excluir sharedprefs de FlutterSecureStorage."}),"\n",(0,i.jsxs)(a.p,{children:["Si necesitas habilitar el android",":fullBackupContent"," para tu aplicaci\xf3n. Configura una regla de copia de seguridad para ",(0,i.jsx)(a.a,{href:"https://developer.android.com/guide/topics/data/autobackup#IncludingFiles",children:"excluir"})," las preferencias utilizadas por el plugin:"]}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-xml",children:'<application ...\n  android:fullBackupContent="@xml/backup_rules">\n</application>\n'})}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-xml",children:'<?xml version="1.0" encoding="utf-8"?>\n<full-backup-content>\n  <exclude domain="sharedpref" path="FlutterSecureStorage"/>\n</full-backup-content>\n'})}),"\n",(0,i.jsxs)(a.p,{children:["Por favor, consulta ",(0,i.jsx)(a.a,{href:"https://pub.dev/packages/flutter_secure_storage#configure-android-version",children:"flutter_secure_storage"})," para m\xe1s detalles."]}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,i.jsx)(a,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}function p(e){const a={a:"a",admonition:"admonition",code:"code",h3:"h3",p:"p",pre:"pre",...(0,r.R)(),...e.components},{Details:n}=a;return n||function(e,a){throw new Error("Expected "+(a?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:"flutter_web_auth"}),(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.a,{href:"https://pub.dev/packages/flutter_web_auth",children:"flutter_web_auth"})," se utiliza detr\xe1s del SDK de flutter de Logto. Confiamos en su interfaz de interacci\xf3n basada en webview para abrir las p\xe1ginas de autorizaci\xf3n de Logto."]}),(0,i.jsx)(a.admonition,{type:"note",children:(0,i.jsx)(a.p,{children:"Este plugin utiliza ASWebAuthenticationSession en iOS 12+ y macOS 10.15+, SFAuthenticationSession en iOS 11, Chrome Custom Tabs en Android y abre una nueva ventana en Web. Puedes construirlo con iOS 8+, pero actualmente solo es compatible con iOS 11 o superior."})}),(0,i.jsx)(a.h3,{id:"registrar-la-url-de-callback-en-android",children:"Registrar la URL de callback en Android"}),(0,i.jsx)(a.p,{children:"Para capturar la URL de callback desde la p\xe1gina web de inicio de sesi\xf3n de Logto, necesitar\xe1s registrar tu redirectUri de inicio de sesi\xf3n en el AndroidManifest.xml."}),(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-xml",children:'<activity android:name="com.linusu.flutter_web_auth.CallbackActivity" android:exported="true">\n    <intent-filter android:label="flutter_web_auth">\n        <action android:name="android.intent.action.VIEW"/>\n        <category android:name="android.intent.category.DEFAULT"/>\n        <category android:name="android.intent.category.BROWSABLE"/>\n        <data android:scheme="io.logto"/>\n    </intent-filter>\n</activity>\n'})})]})}function h(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,i.jsx)(a,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}const g=n.p+"assets/images/flutter-flow-custom-authentication-29ea475c8e52fe77ef9348d6a769ffa8.png",m=n.p+"assets/images/flutter-flow-github-push-ac7fd20f25760f669a19dd9fe61906b3.png",x={slug:"/quick-starts/flutter-flow",sidebar_label:"FlutterFlow",sidebar_custom_props:{description:"FlutterFlow es un marco de bajo c\xf3digo para construir aplicaciones h\xedbridas en Flutter."}},j="Personaliza el FlutterFlow CustomAuthManager usando Logto SDK",f={},b=[{value:"Prerrequisitos",id:"prerrequisitos",level:2},{value:"Habilitar c\xf3digo personalizado en FlutterFlow",id:"habilitar-c\xf3digo-personalizado-en-flutterflow",level:2},{value:"Crea tu interfaz de usuario en FlutterFlow",id:"crea-tu-interfaz-de-usuario-en-flutterflow",level:2},{value:"Personaliza el CustomAuthManager",id:"personaliza-el-customauthmanager",level:2},{value:"Instala la dependencia Logto SDK",id:"instala-la-dependencia-logto-sdk",level:3},{value:"Actualiza el UserProvider",id:"actualiza-el-userprovider",level:3},{value:"Inicializa el cliente logto en CustomAuthManager",id:"inicializa-el-cliente-logto-en-customauthmanager",level:3},{value:"Implementa el m\xe9todo de inicio de sesi\xf3n",id:"implementa-el-m\xe9todo-de-inicio-de-sesi\xf3n",level:3},{value:"Implementa el m\xe9todo de cierre de sesi\xf3n",id:"implementa-el-m\xe9todo-de-cierre-de-sesi\xf3n",level:3},{value:"Actualiza los m\xe9todos utilitarios de autenticaci\xf3n",id:"actualiza-los-m\xe9todos-utilitarios-de-autenticaci\xf3n",level:3},{value:"Integra la autenticaci\xf3n personalizada en tu interfaz de usuario",id:"integra-la-autenticaci\xf3n-personalizada-en-tu-interfaz-de-usuario",level:2},{value:"P\xe1gina de inicio",id:"p\xe1gina-de-inicio",level:3},{value:"P\xe1gina de perfil de usuario",id:"p\xe1gina-de-perfil-de-usuario",level:3},{value:"Lecturas adicionales",id:"lecturas-adicionales",level:2},{value:"Soluci\xf3n de problemas de dependencias",id:"soluci\xf3n-de-problemas-de-dependencias",level:2},{value:"Configurar la versi\xf3n de Android:",id:"configurar-la-versi\xf3n-de-android",level:3},{value:"Desactivar la copia de seguridad autom\xe1tica:",id:"desactivar-la-copia-de-seguridad-autom\xe1tica",level:3},{value:"Registrar la URL de callback en Android",id:"registrar-la-url-de-callback-en-android",level:3}];function k(e){const a={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.header,{children:(0,i.jsx)(a.h1,{id:"personaliza-el-flutterflow-customauthmanager-usando-logto-sdk",children:"Personaliza el FlutterFlow CustomAuthManager usando Logto SDK"})}),"\n",(0,i.jsxs)(a.p,{children:["FlutterFlow tiene una funci\xf3n incorporada de ",(0,i.jsx)(a.a,{href:"https://docs.flutterflow.io/data-and-backend/custom-authentication",children:"autenticaci\xf3n personalizada"})," que te permite autenticar usuarios usando tu propio backend. Sin embargo, el flujo de autenticaci\xf3n personalizada incorporado fue dise\xf1ado para trabajar con una sola llamada a la API de autenticaci\xf3n. Si est\xe1s utilizando un Proveedor de Identidad (IdP) de terceros, la solicitud de autenticaci\xf3n solo se puede realizar utilizando el tipo de concesi\xf3n ",(0,i.jsx)(a.code,{children:"Resource Owner Password Credentials"}),", lo cual no se recomienda para uso en producci\xf3n. Consulta ",(0,i.jsx)(a.a,{href:"https://blog.logto.io/deprecated-ropc-grant-type/",children:"Tipo de concesi\xf3n ropc obsoleto"})," para m\xe1s detalles."]}),"\n",(0,i.jsxs)(a.p,{children:["Un flujo de autenticaci\xf3n est\xe1ndar de OpenID Connect (OIDC) involucra m\xfaltiples pasos, como autorizaci\xf3n, intercambio de tokens y recuperaci\xf3n de informaci\xf3n del usuario. Para implementar un flujo de autenticaci\xf3n OIDC est\xe1ndar con un IdP como Logto, necesitas personalizar la clase ",(0,i.jsx)(a.code,{children:"CustomAuthManager"})," en FlutterFlow."]}),"\n",(0,i.jsxs)(a.p,{children:["Este tutorial te mostrar\xe1 c\xf3mo personalizar la clase ",(0,i.jsx)(a.code,{children:"CustomAuthManager"})," en FlutterFlow usando Logto ",(0,i.jsx)(a.a,{href:"/es/quick-starts/flutter",children:"Flutter SDK"}),". Puedes aprovechar el SDK de Logto para el flujo de autenticaci\xf3n OIDC est\xe1ndar mientras mantienes los beneficios del constructor de interfaz de usuario de FlutterFlow."]}),"\n",(0,i.jsx)(a.admonition,{type:"tip",children:(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:["El paquete Logto SDK est\xe1 disponible en ",(0,i.jsx)(a.a,{href:"https://pub.dev/packages/logto_dart_sdk",children:"pub.dev"})," y en el ",(0,i.jsx)(a.a,{href:"https://github.com/logto-io/dart",children:"repositorio de GitHub de Logto"}),"."]}),"\n",(0,i.jsx)(a.li,{children:"El SDK actualmente solo es adecuado para plataformas Android e iOS."}),"\n"]})}),"\n",(0,i.jsx)(a.h2,{id:"prerrequisitos",children:"Prerrequisitos"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:["Una cuenta de ",(0,i.jsx)(a.a,{href:"https://cloud.logto.io",children:"Logto Cloud"})," o un ",(0,i.jsx)(a.a,{href:"/introduction/set-up-logto-oss",children:"Logto autoalojado"}),"."]}),"\n",(0,i.jsx)(a.li,{children:"Crear una aplicaci\xf3n Flutter de Logto."}),"\n",(0,i.jsx)(a.li,{children:"Un proyecto de FlutterFlow."}),"\n"]}),"\n",(0,i.jsx)(a.h2,{id:"habilitar-c\xf3digo-personalizado-en-flutterflow",children:"Habilitar c\xf3digo personalizado en FlutterFlow"}),"\n",(0,i.jsxs)(a.p,{children:["Para personalizar la clase ",(0,i.jsx)(a.code,{children:"CustomAuthManager"}),", necesitas habilitar la funci\xf3n de c\xf3digo personalizado en FlutterFlow. Sigue la gu\xeda ",(0,i.jsx)(a.a,{href:"https://docs.flutterflow.io/customizing-your-app/manage-custom-code-in-github",children:"Gestionar c\xf3digo personalizado en GitHub"})," para sincronizar tu proyecto de FlutterFlow con GitHub."]}),"\n",(0,i.jsx)(a.admonition,{type:"note",children:(0,i.jsx)(a.p,{children:"Gestionar c\xf3digo personalizado en GitHub es una funci\xf3n premium en FlutterFlow. Necesitas actualizar tu FlutterFlow al plan pro para habilitar esta funci\xf3n."})}),"\n",(0,i.jsx)(a.p,{children:"Una vez hecho esto, tendr\xe1s tres ramas diferentes en tu repositorio de GitHub de FlutterFlow:"}),"\n",(0,i.jsxs)(a.ol,{children:["\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.code,{children:"main"}),": La rama principal para el proyecto Flutter. Necesitar\xe1s esta rama para desplegar tu proyecto."]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.code,{children:"flutterflow"}),": La rama donde ",(0,i.jsx)(a.code,{children:"FlutterFlow"})," sincronizar\xe1 los cambios desde el editor de FlutterFlow."]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.code,{children:"develop"}),": La rama donde puedes modificar tu c\xf3digo personalizado."]}),"\n"]}),"\n",(0,i.jsx)(a.h2,{id:"crea-tu-interfaz-de-usuario-en-flutterflow",children:"Crea tu interfaz de usuario en FlutterFlow"}),"\n",(0,i.jsxs)(a.p,{children:["Primero, crea tu interfaz de usuario en FlutterFlow. Puedes seguir la ",(0,i.jsx)(a.a,{href:"https://docs.flutterflow.io/",children:"documentaci\xf3n de FlutterFlow"})," para crear tu interfaz de usuario seg\xfan tus requisitos. Para este tutorial, como requisito m\xednimo, crearemos dos p\xe1ginas:"]}),"\n",(0,i.jsxs)(a.ol,{children:["\n",(0,i.jsx)(a.li,{children:"Una p\xe1gina de inicio simple con un bot\xf3n de inicio de sesi\xf3n."}),"\n",(0,i.jsx)(a.li,{children:"Una p\xe1gina de perfil de usuario para mostrar la informaci\xf3n del usuario y un bot\xf3n de cierre de sesi\xf3n."}),"\n"]}),"\n",(0,i.jsxs)(a.p,{children:["Ve a la p\xe1gina ",(0,i.jsx)(a.code,{children:"App Settings"})," -> ",(0,i.jsx)(a.code,{children:"Authentication"})," y habilita la autenticaci\xf3n personalizada. Esto crear\xe1 una clase ",(0,i.jsx)(a.code,{children:"CustomAuthManager"})," en tu proyecto de FlutterFlow."]}),"\n",(0,i.jsx)("center",{children:(0,i.jsx)("img",{src:g,alt:"Autenticaci\xf3n personalizada de FlutterFlow"})}),"\n",(0,i.jsxs)(a.p,{children:["Una vez que tengas la interfaz de usuario lista, navega a la p\xe1gina ",(0,i.jsx)(a.code,{children:"integrations"})," -> ",(0,i.jsx)(a.code,{children:"GitHub"})," y haz clic en el bot\xf3n ",(0,i.jsx)(a.code,{children:"Push to Repository"})," para enviar los cambios a la rama ",(0,i.jsx)(a.code,{children:"flutterflow"}),"."]}),"\n",(0,i.jsx)("center",{children:(0,i.jsx)("img",{src:m,alt:"Env\xedo a GitHub de FlutterFlow"})}),"\n",(0,i.jsx)(a.h2,{id:"personaliza-el-customauthmanager",children:"Personaliza el CustomAuthManager"}),"\n",(0,i.jsxs)(a.p,{children:["Cambia a la rama ",(0,i.jsx)(a.code,{children:"develop"})," en tu repositorio de GitHub y fusiona los \xfaltimos cambios de la rama ",(0,i.jsx)(a.code,{children:"flutterflow"}),". Incluyendo tus p\xe1ginas de interfaz de usuario y la clase ",(0,i.jsx)(a.code,{children:"CustomAuthManager"})," preconstruida."]}),"\n",(0,i.jsx)(a.h3,{id:"instala-la-dependencia-logto-sdk",children:"Instala la dependencia Logto SDK"}),"\n",(0,i.jsx)(a.p,{children:"Agrega la dependencia Logto SDK a tu proyecto."}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-bash",children:"  flutter pub add logto_dart_sdk\n"})}),"\n",(0,i.jsxs)(a.admonition,{type:"note",children:[(0,i.jsx)(a.p,{children:"Paquete Http opcional:"}),(0,i.jsxs)(a.p,{children:["El cliente Logto requiere un cliente http para realizar llamadas a la API. Puedes usar el paquete ",(0,i.jsx)(a.code,{children:"http"})," o cualquier otro paquete de cliente http de tu elecci\xf3n."]}),(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-bash",children:"  flutter pub add http\n"})})]}),"\n",(0,i.jsx)(a.h3,{id:"actualiza-el-userprovider",children:"Actualiza el UserProvider"}),"\n",(0,i.jsxs)(a.p,{children:["Agrega la clase ",(0,i.jsx)(a.code,{children:"OpenIdClaims"})," a la clase ",(0,i.jsx)(a.code,{children:"CustomAuthUserProvider"})," para almacenar la informaci\xf3n del usuario."]}),"\n",(0,i.jsxs)(a.blockquote,{children:["\n",(0,i.jsxs)(a.p,{children:["La clase ",(0,i.jsx)(a.code,{children:"OpenIdClaims"})," es parte del SDK de Logto, que proporcionar\xe1 los reclamos ",(0,i.jsx)(a.code,{children:"id_token"})," para el usuario autenticado."]}),"\n"]}),"\n",(0,i.jsx)(d,{}),"\n",(0,i.jsx)(a.h3,{id:"inicializa-el-cliente-logto-en-customauthmanager",children:"Inicializa el cliente logto en CustomAuthManager"}),"\n",(0,i.jsxs)(a.p,{children:["Inicializa el cliente Logto en la clase ",(0,i.jsx)(a.code,{children:"CustomAuthManager"}),"."]}),"\n",(0,i.jsx)(l,{}),"\n",(0,i.jsxs)(a.p,{children:["El m\xe9todo ",(0,i.jsx)(a.code,{children:"initialize"})," inicializar\xe1 el cliente Logto y actualizar\xe1 el flujo de usuario actual con el estado de autenticaci\xf3n del usuario persistido en el almacenamiento local."]}),"\n",(0,i.jsxs)(a.blockquote,{children:["\n",(0,i.jsxs)(a.p,{children:["El SDK de Logto utiliza el paquete ",(0,i.jsx)(a.a,{href:"https://pub.dev/packages/flutter_secure_storage",children:"flutter_secure_storage"})," para almacenar de manera segura la informaci\xf3n de autenticaci\xf3n del usuario."]}),"\n"]}),"\n",(0,i.jsx)(a.h3,{id:"implementa-el-m\xe9todo-de-inicio-de-sesi\xf3n",children:"Implementa el m\xe9todo de inicio de sesi\xf3n"}),"\n",(0,i.jsxs)(a.p,{children:["Llama al m\xe9todo ",(0,i.jsx)(a.code,{children:"LogtoClient.signIn"})," para iniciar un flujo de autenticaci\xf3n OIDC est\xe1ndar. La p\xe1gina de inicio de sesi\xf3n de Logto se abrir\xe1 en una vista web usando ",(0,i.jsx)(a.a,{href:"https://pub.dev/packages/flutter_web_auth",children:"flutter_web_auth"}),"."]}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-dart",children:"// lib/auth/custom_auth/custom_auth_manager.dart\n\nFuture<FlutterFlowAuthAuthUser?> signIn(\n    String redirectUri,\n  ) async {\n    await logtoClient.signIn(redirectUri);\n\n    var idTokenClaims = await logtoClient.idTokenClaims;\n\n    return _updateCurrentUser(\n      loggedIn: idTokenClaims != null,\n      uid: idTokenClaims?.subject,\n      idToken: idTokenClaims,\n    );\n  }\n\n"})}),"\n",(0,i.jsxs)(a.p,{children:["LogtoClient manejar\xe1 los pasos de autorizaci\xf3n, intercambio de tokens y recuperaci\xf3n de informaci\xf3n del usuario. Una vez que el usuario est\xe9 autenticado, los ",(0,i.jsx)(a.code,{children:"idTokenClaims"})," se almacenar\xe1n en el almacenamiento local. Recupera los ",(0,i.jsx)(a.code,{children:"idTokenClaims"})," del LogtoClient y actualiza el flujo de usuario actual."]}),"\n",(0,i.jsx)(a.h3,{id:"implementa-el-m\xe9todo-de-cierre-de-sesi\xf3n",children:"Implementa el m\xe9todo de cierre de sesi\xf3n"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-dart",children:"// lib/auth/custom_auth/custom_auth_manager.dart\n\nFuture signOut() async {\n    await logtoClient.signOut();\n\n    flutterFlowAuthAuthUserSubject.add(\n      FlutterFlowAuthAuthUser(loggedIn: false),\n    );\n  }\n"})}),"\n",(0,i.jsx)(a.h3,{id:"actualiza-los-m\xe9todos-utilitarios-de-autenticaci\xf3n",children:"Actualiza los m\xe9todos utilitarios de autenticaci\xf3n"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:["Agrega el getter ",(0,i.jsx)(a.code,{children:"authManager"})," para acceder a la instancia de ",(0,i.jsx)(a.code,{children:"CustomAuthManager"}),"."]}),"\n",(0,i.jsxs)(a.li,{children:["Agrega el getter ",(0,i.jsx)(a.code,{children:"currentUserUid"})," para obtener el uid del usuario actual."]}),"\n",(0,i.jsxs)(a.li,{children:["Agrega el getter ",(0,i.jsx)(a.code,{children:"currentUserData"})," para obtener los datos del usuario actual."]}),"\n",(0,i.jsxs)(a.li,{children:["Agrega el getter ",(0,i.jsx)(a.code,{children:"logtoClient"})," para acceder a la instancia del cliente Logto."]}),"\n"]}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-dart",children:"// lib/auth/custom_auth/auth_util.dart\n\nimport 'package:logto_dart_sdk/logto_client.dart';\nimport 'package:logto_dart_sdk/src/modules/id_token.dart';\n\nimport 'custom_auth_manager.dart';\n\nexport 'custom_auth_manager.dart';\n\nfinal _authManager = CustomAuthManager();\nCustomAuthManager get authManager => _authManager;\nString get currentUserUid => currentUser?.uid ?? '';\nOpenIdClaims? get currentUserData => currentUser?.idToken;\nLogtoClient get logtoClient => _authManager.logtoClient;\n"})}),"\n",(0,i.jsx)(a.h2,{id:"integra-la-autenticaci\xf3n-personalizada-en-tu-interfaz-de-usuario",children:"Integra la autenticaci\xf3n personalizada en tu interfaz de usuario"}),"\n",(0,i.jsx)(a.h3,{id:"p\xe1gina-de-inicio",children:"P\xe1gina de inicio"}),"\n",(0,i.jsxs)(a.p,{children:["Llama al m\xe9todo ",(0,i.jsx)(a.code,{children:"authManager.signIn"})," para iniciar el flujo de autenticaci\xf3n cuando el usuario haga clic en el bot\xf3n de inicio de sesi\xf3n."]}),"\n",(0,i.jsxs)(a.blockquote,{children:["\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.code,{children:"redirectUri"})," es la URL de callback que se utilizar\xe1 para capturar el callback de autorizaci\xf3n desde la p\xe1gina de inicio de sesi\xf3n de Logto. Consulta el ",(0,i.jsx)(a.a,{href:"/es/quick-starts/flutter#implement-sign-in",children:"Flutter SDK"})," para m\xe1s detalles sobre el redirectUri."]}),"\n"]}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-dart",children:"// lib/pages/home_page/home_page_widget.dart\n\nfinal redirectUri = 'io.logto://callback';\n\n// ...\n\nFFButtonWidget(\n  onPressed: () async {\n    GoRouter.of(context).prepareAuthEvent();\n\n    await authManager.signIn(redirectUri);\n\n    context.replaceNamed('user');\n  },\n  text: 'Sign In',\n  // ...\n)\n"})}),"\n",(0,i.jsx)(a.h3,{id:"p\xe1gina-de-perfil-de-usuario",children:"P\xe1gina de perfil de usuario"}),"\n",(0,i.jsx)(a.p,{children:"Usa los getters utilitarios de autenticaci\xf3n para acceder a los datos del usuario actual y a la instancia del cliente Logto."}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-dart",children:"// lib/pages/user/user_widget.dart\n\nimport '/auth/custom_auth/auth_util.dart';\n\n// ...\n\nchildren: [\n  Text(\n    'User ID: $currentUserUid',\n  ),\n  Text(\n    'Display Name: ${currentUserData?.name}',\n  ),\n  Text(\n    'Username: ${currentUserData?.username}',\n  ),\n  Text(\n    'Email: ${currentUserData?.emailVerified ?? currentUserData?.email}',\n  ),\n]\n\n"})}),"\n",(0,i.jsx)(a.p,{children:"Implementa el m\xe9todo de cierre de sesi\xf3n cuando el usuario haga clic en el bot\xf3n de cierre de sesi\xf3n."}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-dart",children:"// lib/pages/user/user_widget.dart\n\nFFButtonWidget(\n  onPressed: () async {\n    await authManager.signOut();\n\n    context.replaceNamed('HomePage');\n  },\n  text: 'Sign Out',\n  // ...\n)\n"})}),"\n",(0,i.jsx)(a.h2,{id:"lecturas-adicionales",children:"Lecturas adicionales"}),"\n",(0,i.jsxs)(a.p,{children:["El SDK de Logto proporciona m\xe1s m\xe9todos para interactuar con la API de Logto. Puedes personalizar a\xfan m\xe1s la clase ",(0,i.jsx)(a.code,{children:"CustomAuthManager"})," para implementar m\xe1s funciones."]}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.a,{href:"/es/quick-starts/flutter#get-user-information",children:"Perfil de usuario"})}),"\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.a,{href:"/es/quick-starts/flutter#api-resources",children:"Recursos de API"})}),"\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.a,{href:"/es/quick-starts/flutter#organization",children:"Organizaci\xf3n"})}),"\n"]}),"\n",(0,i.jsx)(a.h2,{id:"soluci\xf3n-de-problemas-de-dependencias",children:"Soluci\xf3n de problemas de dependencias"}),"\n",(0,i.jsx)(u,{}),"\n",(0,i.jsx)(h,{})]})}function w(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,i.jsx)(a,{...e,children:(0,i.jsx)(k,{...e})}):k(e)}},15658:(e,a,n)=>{n.d(a,{R:()=>o,x:()=>l});var t=n(30758);const i={},r=t.createContext(i);function o(e){const a=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function l(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(r.Provider,{value:a},e.children)}}}]);