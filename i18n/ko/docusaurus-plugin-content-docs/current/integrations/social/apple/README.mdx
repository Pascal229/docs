---
slug: /integrations/apple
sidebar_label: Apple
sidebar_custom_props:
  darkLogoFilename: 'apple-dark.svg'
  description: Apple은 하드웨어 및 소프트웨어의 다국적 고급 제공업체입니다.
---

import GuideTip from '../../fragments/_guide-tip.mdx';

# Apple 소셜 로그인을 설정하세요

Apple 소셜 로그인에 대한 공식 Logto 커넥터입니다.

<GuideTip />

## 시작하기 \{#get-started}

커넥터의 개념을 모르거나 이 커넥터를 로그인 경험에 추가하는 방법을 모른다면 [Logto 튜토리얼](/connectors/social-connectors)을 참조하세요.

:::note

앱에 다른 소셜 로그인 방법이 있는 경우, AppStore에서는 Apple 로그인이 필요합니다.
Android 앱을 제공하는 경우 Android 기기에서 Apple 로그인을 사용하는 것이 좋습니다.

:::

계속하기 전에 [Apple Developer Program](https://developer.apple.com/programs/)에 등록해야 합니다.

### 앱에 Apple 로그인을 활성화하세요 \{#enable-sign-in-with-apple-for-your-app}

:::caution

웹 앱에서만 Apple 로그인을 구현하려는 경우에도 AppStore 생태계를 수용하는 기존 앱 (즉, 유효한 App ID)이 있어야 합니다.

:::

Xcode -> 프로젝트 설정 -> 서명 및 기능을 통해 수행하거나 [Certificates, Identifiers & Profiles](https://developer.apple.com/account/resources/identifiers/list/bundleId)를 방문하세요.

![Apple 로그인을 활성화하세요](./assets/enable-sign-in-with-apple-in-xcode.png)

자세한 내용은 [Apple 공식 문서](https://developer.apple.com/documentation/sign_in_with_apple/configuring_your_environment_for_sign_in_with_apple)의 "App ID 활성화" 섹션을 참조하세요.

### 식별자 생성하기 \{#create-an-identifier}

1. [Certificates, Identifiers & Profiles](https://developer.apple.com/account/resources/identifiers/list/serviceId)를 방문한 후 "Identifier" 옆의 "+" 버튼을 클릭하세요.
2. "새 식별자 등록" 페이지에서 "Services IDs"를 선택하고 "Continue"를 클릭하세요.
3. "Description"과 "Identifier"를 입력하세요 (예: `Logto Test` 및 `io.logto.test`), 그런 다음 "Continue"를 클릭하세요.
4. 정보를 다시 확인하고 "Register"를 클릭하세요.

### 식별자에 Apple 로그인을 활성화하세요 \{#enable-sign-in-with-apple-for-your-identifier}

방금 생성한 식별자를 클릭하세요. 세부 정보 페이지에서 "Sign in with Apple"을 체크하고 "Configure"를 클릭하세요.

![Apple 로그인을 활성화하세요](./assets/enable-sign-in-with-apple.png)

열리는 모달에서 방금 Apple 로그인을 활성화한 App ID를 선택하세요.

프로토콜과 포트를 제외한 Logto 인스턴스의 도메인을 입력하세요. 예: `your.logto.domain`; 그런 다음 "Return URL" (즉, Redirect URI)을 입력하세요. 이는 `/callback/${connector_id}`가 포함된 Logto URL입니다. 예: `https://your.logto.domain/callback/apple-universal`. Admin Console에서 Apple 커넥터를 생성한 후 무작위로 생성된 `connector_id`를 얻을 수 있습니다.

![domain-and-url](./assets/domain-and-url.png)

"Next"를 클릭한 다음 모달을 닫기 위해 "Done"을 클릭하세요. 오른쪽 상단의 "Continue"를 클릭한 다음 "Save"를 클릭하여 구성을 저장하세요.

:::caution

Apple은 HTTP 프로토콜과 `localhost` 도메인을 가진 Return URL을 허용하지 않습니다.

로컬에서 테스트하려면 `/etc/hosts` 파일을 편집하여 localhost를 사용자 지정 도메인에 매핑하고 로컬 HTTPS 환경을 설정해야 합니다. [mkcert](https://github.com/FiloSottile/mkcert)는 로컬 HTTPS 설정에 도움이 될 수 있습니다.

:::

## 스코프 구성하기 \{#configure-scope}

Apple에서 사용자의 이메일을 받으려면 스코프에 `email`을 포함하도록 구성해야 합니다. 이메일과 이름 모두를 원한다면 `name email`을 스코프로 사용할 수 있습니다. 자세한 내용은 [Apple 공식 문서](https://developer.apple.com/documentation/sign_in_with_apple/sign_in_with_apple_js/incorporating_sign_in_with_apple_into_other_platforms#3332113)를 참조하세요.

:::note

사용자가 앱에서 이메일 주소를 숨기기로 선택할 수 있습니다. 이 경우 실제 이메일 주소를 가져올 수 없습니다. 대신 `random@privaterelay.appleid.com`과 같은 이메일 주소가 반환됩니다.

:::

### 스코프 구성의 함정 \{#pitfalls-of-configuring-scope}

Apple로 이미 로그인한 후 사용자의 이메일 주소를 요청하도록 앱을 구성한 경우, Apple ID를 사용하여 다시 로그인하더라도 기존 사용자의 이메일 주소를 가져올 수 없습니다. 이를 해결하려면 사용자가 [Apple ID 계정 관리 페이지](https://appleid.apple.com/account/manage)를 방문하여 "Sign in with Apple" 섹션에서 애플리케이션을 제거하도록 안내해야 합니다. 이는 앱의 세부 정보 페이지에서 "Apple Sign In 사용 중지"를 선택하여 수행할 수 있습니다.

예를 들어, 앱이 사용자의 이메일과 이름 (`email name` 스코프)을 모두 요청하는 경우, 새로운 사용자가 처음 로그인할 때 보는 동의 화면은 다음과 유사해야 합니다:

![Apple 동의 화면으로 로그인](./assets/sign-in-with-apple-consent-screen.png)

개발자 토론은 [여기](https://forums.developer.apple.com/forums/thread/132223)를 참조하세요.

## Apple 커넥터 테스트하기 \{#test-apple-connector}

이제 완료되었습니다. Apple 커넥터는 웹 및 네이티브 앱 모두에서 사용할 수 있어야 합니다. [로그인 경험에서 소셜 커넥터 활성화](/connectors/social-connectors/#enable-social-sign-in)를 잊지 마세요.
